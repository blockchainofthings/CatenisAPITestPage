<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Test Catenis API</title>

        <style type="text/css">
            pre {
                overflow-x: auto;
                white-space: pre-wrap;
                white-space: -moz-pre-wrap;
                white-space: -pre-wrap;
                white-space: -o-pre-wrap;
                word-wrap: break-word;
            }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
        <script src="lib/CatenisAPIClientJS.min.js"></script>
        <script language="JavaScript">
            var ctnApiClient;
            var device = {};
            var lastMsgId;
            var lastContToken;
            var lastEphemMsgId;
            var lastNFAssetId;
            var lastNFTokenIds;
            var lastNFAIssuanceContToken;
            var lastNFAIssuanceId;
            var lastNFTRetrievalContToken;
            var lastNFTRetrievalId;
            var lastNFTTransferId;

            function resetDevice() {
                device = {};
            }

            function initApiClient() {
                ctnApiClient = undefined;
                var env;

                switch (getFieldValue('selEnvironment')) {
                    case 'development': {
                        env = {
                            defaultDevice: {
                                deviceId: 'drc3XdxNtzoucpw9xiRp',
                                apiAccessSecret: '4c1749c8e86f65e0a73e5fb19f2aa9e74a716bc22d7956bf3072b4bc3fbfe2a0d138ad0d4bcfee251e4e5f54d6e92b8fd4eb36958a7aeaeeb51e8d2fcc4552c3'
                            },
                            opts: {
                                host: 'localhost:3000',
                                secure: false
                            }
                        };
                    }

                    break;

                    case 'sandbox': {
                        env = {
                            defaultDevice: {
                                deviceId: 'dL8zaQDcyNvxRW3FqsJd',
                                apiAccessSecret: '2e080fe06bd9d6403639d8e7c8d4b518949fdbf1e76a651e29706135a98c73dc815ee7647f7cb9b5ae19b04010b32718f1b85aacdd281677aca7499eeb3275f7'
                            },
                            opts: {
                                environment: 'sandbox'
                            }
                        };
                    }

                    break;

                    case 'debug': {
                        env = {
                            defaultDevice: {
                                deviceId: 'dchLYMJeB8EznJtjERfx',
                                apiAccessSecret: '908687ba8fca5264aca2606342b45eea1ce921bb1d6f17a683b05a1af342cdc888d2a91fe118dc11a351d14df992e88266141c71a17ded2037eeeaf915a473fd'
                            },
                            opts: {
                                host: 'debug.catenis.io'
                            }
                        };
                    }

                    break;

                    default:
                        throw new Error('Invalid Catenis environment');
                }

                if (!device.deviceId) {
                    device = env.defaultDevice;
                    resetDeviceIdField();
                }

                ctnApiClient = new CatenisApiClient(device.deviceId, device.apiAccessSecret, env.opts);

                fillPermEventNames(['selSetPermRightsEventName', 'selRetrvPermRightsEventName', 'selCheckEffectivePermRight']);
                fillNotifyEventNames(['selOpenNotifyEventName', 'selCloseNotifyEventName']);
            }

            function logMessage(message, sendInChunks, isFinal, continuationToken, encoding, encrypt, offChain, storage, async) {
                if (sendInChunks) {
                    message = {
                        data: message,
                        isFinal: isFinal,
                        continuationToken: continuationToken
                    }
                }

                ctnApiClient.logMessage(message, {
                    encoding: encoding,
                    encrypt: encrypt,
                    offChain: offChain,
                    storage: storage,
                    async: async
                }, processMessageResult);
            }

            function sendMessage(message, sendInChunks, isFinal, continuationToken, targetDeviceId, isProdUniqueId, encoding, encrypt, offChain, storage, readConfirmation, async) {
                if (sendInChunks) {
                    message = {
                        data: message,
                        isFinal: isFinal,
                        continuationToken: continuationToken
                    }
                }

                ctnApiClient.sendMessage(message, {
                    id: targetDeviceId,
                    isProdUniqueId: isProdUniqueId
                }, {
                    readConfirmation: readConfirmation,
                    encoding: encoding,
                    encrypt: encrypt,
                    offChain: offChain,
                    storage: storage,
                    async: async
                }, processMessageResult);
            }

            function readMessage(messageId, encoding, continuationToken, dataChunkSize, async) {
                var options = {
                    encoding: encoding,
                    continuationToken: continuationToken,
                    dataChunkSize: dataChunkSize,
                    async: async
                };
                ctnApiClient.readMessage(messageId, options, processMessageResult);
            }

            function retrieveMessageContainer(messageId) {
                ctnApiClient.retrieveMessageContainer(messageId, processResult);
            }

            function retrieveMessageOrigin(messageId, msgToSign) {
                ctnApiClient.retrieveMessageOrigin(messageId, msgToSign, processResult);
            }

            function retrieveMessageProgress(ephemMessageId) {
                ctnApiClient.retrieveMessageProgress(ephemMessageId, processMessageResult);
            }

            function listMessages(action, direction, fromDeviceIds, toDeviceIds, fromDeviceProdUniqueIds, toDeviceProdUniqueIds, readState, startDate, endDate, limit, skip) {
                var options = {
                    action: action,
                    direction: direction,
                    readState: readState,
                    startDate: startDate,
                    endDate: endDate
                };
                var fromDevices = [];
                if (fromDeviceIds) {
                    fromDeviceIds.split(',').forEach(function (deviceId) {
                        fromDevices.push({id: deviceId});
                    });
                }
                if (fromDeviceProdUniqueIds) {
                    fromDeviceProdUniqueIds.split(',').forEach(function (prodUniqueId) {
                        fromDevices.push({
                            id: prodUniqueId,
                            isProdUniqueId: true
                        });
                    });
                }
                if (fromDevices.length > 0) {
                    options.fromDevices = fromDevices;
                }
                var toDevices = [];
                if (toDeviceIds) {
                    toDeviceIds.split(',').forEach(function (deviceId) {
                        toDevices.push({id: deviceId});
                    });
                }
                if (toDeviceProdUniqueIds) {
                    toDeviceProdUniqueIds.split(',').forEach(function (prodUniqueId) {
                        toDevices.push({
                            id: prodUniqueId,
                            isProdUniqueId: true
                        });
                    });
                }
                if (toDevices.length > 0) {
                    options.toDevices = toDevices;
                }
                ctnApiClient.listMessages(options, limit, skip, processResult);
            }

            function listPermissionEvents(cb) {
                ctnApiClient.listPermissionEvents(typeof cb === 'function' ? cb : processResult);
            }

            function retrievePermissionRights(eventName) {
                ctnApiClient.retrievePermissionRights(eventName, processResult);
            }

            function setPermissionRights(eventName, rights) {
                ctnApiClient.setPermissionRights(eventName, rights, processResult);
            }

            function checkEffectivePermissionRight(eventName, deviceId, isProdUniqueId) {
                ctnApiClient.checkEffectivePermissionRight(eventName, deviceId, isProdUniqueId, processResult);
            }

            function listNotificationEvents(cb) {
                ctnApiClient.listNotificationEvents(typeof cb === 'function' ? cb : processResult);
            }

            function retrieveDeviceIdentificationInfo(deviceId, isProdUniqueId) {
                ctnApiClient.retrieveDeviceIdentificationInfo(deviceId, isProdUniqueId, processResult);
            }

            function issueAsset(name, description, canReissue, decimalPlaces, amount, holdingDeviceId, isProdUniqueId) {
                var holdingDevice;

                if (holdingDeviceId) {
                    holdingDevice = {
                        id: holdingDeviceId
                    };

                    if (isProdUniqueId) {
                        holdingDevice.isProdUniqueId = isProdUniqueId;
                    }
                }

                ctnApiClient.issueAsset({
                    name: name,
                    description: description,
                    canReissue: canReissue,
                    decimalPlaces: decimalPlaces
                }, amount, holdingDevice, processResult);
            }

            function reissueAsset(assetId, amount, holdingDeviceId, isProdUniqueId) {
                var holdingDevice;

                if (holdingDeviceId) {
                    holdingDevice = {
                        id: holdingDeviceId
                    };

                    if (isProdUniqueId) {
                        holdingDevice.isProdUniqueId = isProdUniqueId;
                    }
                }

                ctnApiClient.reissueAsset(assetId, amount, holdingDevice, processResult);
            }
            
            function transferAsset(assetId, amount, receivingDeviceId, isProdUniqueId) {
                var receivingDevice;

                if (receivingDeviceId) {
                    receivingDevice = {
                        id: receivingDeviceId
                    };

                    if (isProdUniqueId) {
                        receivingDevice.isProdUniqueId = isProdUniqueId;
                    }
                }

                ctnApiClient.transferAsset(assetId, amount, receivingDevice, processResult);
            }

            function retrieveAssetInfo(assetId) {
                ctnApiClient.retrieveAssetInfo(assetId, processResult);
            }

            function getAssetBalance(assetId) {
                ctnApiClient.getAssetBalance(assetId, processResult);
            }

            function listOwnedAssets(limit, skip) {
                ctnApiClient.listOwnedAssets(limit, skip, processResult);
            }

            function listIssuedAssets(limit, skip) {
                ctnApiClient.listIssuedAssets(limit, skip, processResult);
            }

            function retrieveAssetIssuanceHistory(assetId, startDate, endDate, limit, skip) {
                ctnApiClient.retrieveAssetIssuanceHistory(assetId, startDate, endDate, limit, skip, processResult);
            }

            function listAssetHolders(assetId, limit, skip) {
                ctnApiClient.listAssetHolders(assetId, limit, skip, processResult);
            }

            function exportAsset(assetId, foreignBlockchain, tokenName, tokenSymbol, consumptionProfile, estimateOnly) {
                ctnApiClient.exportAsset(assetId, foreignBlockchain, {
                    name: tokenName,
                    symbol: tokenSymbol
                }, {
                    consumptionProfile,
                    estimateOnly
                }, processResult);
            }

            function migrateAsset(assetId, foreignBlockchain, migrationId, direction, amount, destAddress, consumptionProfile, estimateOnly) {
                var migration = migrationId ? migrationId : {
                    direction,
                    amount,
                    destAddress
                };

                ctnApiClient.migrateAsset(assetId, foreignBlockchain, migration, {
                    consumptionProfile,
                    estimateOnly
                }, processResult);
            }

            function assetExportOutcome(assetId, foreignBlockchain) {
                ctnApiClient.assetExportOutcome(assetId, foreignBlockchain, processMessageResult);
            }

            function assetMigrationOutcome(migrationId) {
                ctnApiClient.assetMigrationOutcome(migrationId, processMessageResult);
            }

            function listExportedAssets(assetId, foreignBlockchain, tokenSymbol, status, negateStatus, startDate, endDate, limit, skip) {
                ctnApiClient.listExportedAssets({
                    assetId,
                    foreignBlockchain,
                    tokenSymbol,
                    status,
                    negateStatus,
                    startDate,
                    endDate
                }, limit, skip, processResult);
            }

            function listAssetMigrations(assetId, foreignBlockchain, direction, status, negateStatus, startDate, endDate, limit, skip) {
                ctnApiClient.listAssetMigrations({
                    assetId,
                    foreignBlockchain,
                    direction,
                    status,
                    negateStatus,
                    startDate,
                    endDate
                }, limit, skip, processResult);
            }

            function issueNonFungibleAsset(nonFungibleTokens, isFinal, continuationToken, name, description, canReissue, encryptNFTContents, holdingDevices, _async) {
                var issuanceInfoOrContinuationToken = continuationToken ? continuationToken : {
                    assetInfo: {
                        name: name,
                        description: description,
                        canReissue: canReissue
                    },
                    encryptNFTContents: encryptNFTContents,
                    holdingDevices: holdingDevices,
                    async: _async
                };

                console.debug('>>>>>> issueNonFungibleAsset() arguments:', {
                    issuanceInfoOrContinuationToken,
                    nonFungibleTokens,
                    isFinal
                });
                ctnApiClient.issueNonFungibleAsset(issuanceInfoOrContinuationToken, nonFungibleTokens, isFinal, processNFAssetIssuanceResult);
            }

            function reissueNonFungibleAsset(assetId, nonFungibleTokens, isFinal, continuationToken, encryptNFTContents, holdingDevices, _async) {
                var issuanceInfoOrContinuationToken = continuationToken ? continuationToken : {
                    encryptNFTContents: encryptNFTContents,
                    holdingDevices: holdingDevices,
                    async: _async
                };

                console.debug('>>>>>> reissueNonFungibleAsset() arguments:', {
                    assetId,
                    issuanceInfoOrContinuationToken,
                    nonFungibleTokens,
                    isFinal
                });
                ctnApiClient.reissueNonFungibleAsset(assetId, issuanceInfoOrContinuationToken, nonFungibleTokens, isFinal, processNFAssetIssuanceResult);
            }

            function retrieveNonFungibleAssetIssuanceProgress(issuanceId) {
                ctnApiClient.retrieveNonFungibleAssetIssuanceProgress(issuanceId, processNFAssetIssuanceResult);
            }

            function retrieveNonFungibleToken(tokenId, continuationToken, retrieveContents, contentsOnly, contentsEncoding, dataChunkSize, _async) {
                var options = {
                    retrieveContents: retrieveContents,
                    contentsOnly: contentsOnly,
                    contentsEncoding: contentsEncoding,
                    dataChunkSize: dataChunkSize,
                    async: _async,
                    continuationToken: continuationToken
                };

                ctnApiClient.retrieveNonFungibleToken(tokenId, options, processNFTokenRetrievalResult);
            }

            function retrieveNonFungibleTokenRetrievalProgress(tokenId, retrievalId) {
                ctnApiClient.retrieveNonFungibleTokenRetrievalProgress(tokenId, retrievalId, processNFTokenRetrievalResult);
            }

            function transferNonFungibleToken(tokenId, receivingDeviceId, isProdUniqueId, _async) {
                var receivingDevice = {
                    id: receivingDeviceId
                };

                if (isProdUniqueId) {
                    receivingDevice.isProdUniqueId = isProdUniqueId;
                }

                ctnApiClient.transferNonFungibleToken(tokenId, receivingDevice, _async, processNFTokenTransferResult);
            }

            function retrieveNonFungibleTokenTransferProgress(tokenId, transferId) {
                ctnApiClient.retrieveNonFungibleTokenTransferProgress(tokenId, transferId, processResult);
            }

            function processMessageResult(err, data, parseResultOnly) {
                if (!err && typeof data === 'object' && data !== null) {
                    if (typeof data.messageId === 'string') {
                        lastMsgId = data.messageId;
                    }
                    else if (typeof data.continuationToken === 'string') {
                        lastContToken = data.continuationToken;
                    }
                    else if (typeof data.provisionalMessageId === 'string') {
                        lastEphemMsgId = data.provisionalMessageId;
                    }
                    else if (typeof data.cachedMessageId === 'string') {
                        lastEphemMsgId = data.cachedMessageId;
                    }
                    if (typeof data.result === 'object' && data.result !== null) {
                        if (typeof data.result.continuationToken === 'string') {
                            lastContToken = data.result.continuationToken;
                        }
                        else if (typeof data.result.messageId === 'string') {
                            lastMsgId = data.result.messageId;
                        }
                    }
                }

                if (!parseResultOnly) {
                    processResult(err, data);
                }
            }

            function processNFAssetIssuanceResult(err, data, parseResultOnly) {
                if (!err && typeof data === 'object' && data !== null) {
                    if (typeof data.nfTokenIds === 'object') {
                        lastNFTokenIds = data.nfTokenIds;

                        if (typeof data.assetId === 'string') {
                            lastNFAssetId = data.assetId;
                        }
                    }
                    else if (typeof data.continuationToken === 'string') {
                        lastNFAIssuanceContToken = data.continuationToken;
                    }
                    else if (typeof data.assetIssuanceId === 'string') {
                        lastNFAIssuanceId = data.assetIssuanceId;
                    }
                    if (typeof data.result === 'object' && data.result !== null) {
                        if (typeof data.result.nfTokenIds === 'object') {
                            lastNFTokenIds = data.result.nfTokenIds;

                            if (typeof data.result.assetId === 'string') {
                                lastNFAssetId = data.result.assetId;
                            }
                        }
                    }
                }

                if (!parseResultOnly) {
                    processResult(err, data);
                }
            }

            function processNFTokenRetrievalResult(err, data, parseResultOnly) {
                if (!err && typeof data === 'object' && data !== null) {
                    if (typeof data.continuationToken === 'string') {
                        lastNFTRetrievalContToken = data.continuationToken;
                    }
                    else if (typeof data.tokenRetrievalId === 'string') {
                        lastNFTRetrievalId = data.tokenRetrievalId;
                    }
                }

                if (!parseResultOnly) {
                    processResult(err, data);
                }
            }

            function processNFTokenTransferResult(err, data) {
                if (!err && typeof data === 'object' && data !== null) {
                    if (typeof data.tokenTransferId === 'string') {
                        lastNFTTransferId = data.tokenTransferId;
                    }
                }

                processResult(err, data);
            }

            function processResult(err, data) {
                //showArgs.bind(undefined, 'processResult')(arguments);
                if (err) {
                    showApiResult(err, true);
                }
                else {
                    showApiResult(data);
                }
            }

            function showApiResult(data, isError) {
                document.getElementById('pApiResult').innerHTML = isError ? '<span style="color: red;">ERROR:</span>' + (typeof data === 'object' && data !== null && data.message ? '<br>' + data.message: '<pre>' + JSON.stringify(data, null, '  ') + '</pre>') : '<pre>' + JSON.stringify(data, null, '  ') + '</pre>';
            }

            function clearApiResult() {
                document.getElementById('pApiResult').innerHTML = '';
            }

            function submitIssueNFAsset(contCall) {
                clearApiResult();

                var nfTokens, isFinal, continuationToken, encryptNFTContents, holdingDevices, _async;

                if(isFieldChecked('cbxNFAReissue')) {
                    var assetId;

                    if((assetId = requireField('itxNFAssetId', 'non-fungible asset ID', false, true, true)) === false) {
                        return false;
                    }

                    if (isFieldChecked('cbxNFAIssueContCall')) {
                        if ((continuationToken = requireField('itxNFAIssueContToken', 'asset issuance continuation token', true, true, true)) === false) {
                            return false;
                        }
                    }
                    else {
                        encryptNFTContents = isFieldChecked('cbxEncryptNFTContents');
                        holdingDevices = getIssueNFAssetHoldingDevices();
                        _async = isFieldChecked('cbxIssueNFAAsync');
                    }

                    if ((nfTokens = checkIssueNFAssetNFTokens(continuationToken != null)) === false) {
                        return false;
                    }

                    isFinal = isFieldChecked('cbxIssueNFAFinal');

                    reissueNonFungibleAsset(assetId, nfTokens, isFinal, continuationToken, encryptNFTContents, holdingDevices, _async);
                }
                else {
                    var name, description, canReissue;

                    if (isFieldChecked('cbxNFAIssueContCall')) {
                        if ((continuationToken = requireField('itxNFAIssueContToken', 'asset issuance continuation token', true, true, true)) === false) {
                            return false;
                        }
                    }
                    else {
                        if((name = requireField('itxNFAssetName', 'asset name', true, true, true)) === false) {
                            return false;
                        }

                        description = checkUndefined(getFieldValue('itxNFAssetDescription', true));
                        canReissue = isFieldChecked('cbxNFACanReissue');
                        encryptNFTContents = isFieldChecked('cbxEncryptNFTContents');
                        holdingDevices = getIssueNFAssetHoldingDevices();
                        _async = isFieldChecked('cbxIssueNFAAsync');
                    }

                    if ((nfTokens = checkIssueNFAssetNFTokens(continuationToken != null)) === false) {
                        return false;
                    }

                    isFinal = isFieldChecked('cbxIssueNFAFinal');

                    issueNonFungibleAsset(nfTokens, isFinal, continuationToken, name, description, canReissue, encryptNFTContents, holdingDevices, _async);
                }
            }

            function submitRetrieveNFAIssuanceProgress() {
                clearApiResult();

                var assetIssuanceId;

                if((assetIssuanceId = requireField('itxNFAssetIssuanceId', 'asset issuance ID', true, true, true)) === false) {
                    return false;
                }

                retrieveNonFungibleAssetIssuanceProgress(assetIssuanceId);
            }

            function submitRetrieveNFToken() {
                clearApiResult();

                var tokenId, continuationToken, retrieveContents, contentsOnly, contentsEncoding, dataChunkSize, _async;

                if((tokenId = requireField('itxRetrieveNFTTokenId', 'non-fungible token ID', false, true, true)) === false) {
                    return false;
                }

                if (isFieldChecked('cbxNFTRetrieveContCall')) {
                    if ((continuationToken = requireField('itxNFTRetrieveContToken', 'token retrieval continuation token', false, true, true)) === false) {
                        return false;
                    }
                }
                else {
                    retrieveContents = isFieldChecked('cbxRetrieveNFTContents');

                    if (retrieveContents) {
                        contentsOnly = isFieldChecked('cbxRetrieveNFTContsOnly');
                        contentsEncoding = getFieldValue('selRetrieveNFTEncoding');

                        if (checkUndefined(getFieldValue('itxRetrieveNFTChunkSize', true)) !== undefined) {
                            if ((dataChunkSize = checkIntegerNumberField('itxRetrieveNFTChunkSize', 'size value', true)) === false) {
                                return false;
                            }
                        }
                    }

                    _async = isFieldChecked('cbxRetrieveNFTAsync');
                }

                retrieveNonFungibleToken(tokenId, continuationToken, retrieveContents, contentsOnly, contentsEncoding, dataChunkSize, _async);
            }

            function submitRetrieveNFTRetrievalProgress() {
                clearApiResult();

                var tokenId, tokenRetrievalId;

                if((tokenId = requireField('itxRetrieveNFTProgressTokenId', 'non-fungible token ID', false, true, true)) === false) {
                    return false;
                }

                if((tokenRetrievalId = requireField('itxNFTRetrievalId', 'token retrieval ID', false, true, true)) === false) {
                    return false;
                }

                retrieveNonFungibleTokenRetrievalProgress(tokenId, tokenRetrievalId);
            }

            function submitTransferNFToken() {
                clearApiResult();

                var tokenId, receivingDeviceId, isProdUniqueId, _async;

                if((tokenId = requireField('itxTransferNFTTokenId', 'non-fungible token ID', false, true, true)) === false) {
                    return false;
                }

                if((receivingDeviceId = requireField('itxTransferNFTRecvDeviceId', 'receiving device ID', false, true, true)) === false) {
                    return false;
                }

                isProdUniqueId = isFieldChecked('cbxTransferNFTProdUniqId');
                _async = isFieldChecked('cbxTransferNFTAsync');

                transferNonFungibleToken(tokenId, receivingDeviceId, isProdUniqueId, _async);
            }

            function submitRetrieveNFTTransferProgress() {
                clearApiResult();

                var tokenId, tokenTransferId;

                if((tokenId = requireField('itxTransferNFTProgressTokenId', 'non-fungible token ID', false, true, true)) === false) {
                    return false;
                }

                if((tokenTransferId = requireField('itxNFTTransferId', 'token transfer ID', false, true, true)) === false) {
                    return false;
                }

                retrieveNonFungibleTokenTransferProgress(tokenId, tokenTransferId);
            }

            function getIssueNFAssetHoldingDevices() {
                var fieldSetEntries = getFieldSetEntries(document.getElementById('tblNFTHoldingDevices'), [
                    {
                        fieldName: 'id',
                        className: 'itxNFTHoldDeviceId'
                    },
                    {
                        fieldName: 'isProdUniqueId',
                        className: 'cbxNFTProdUniqId'
                    }
                ]);
                var holdingDevices = [];

                for (var fieldSetEntry of fieldSetEntries) {
                    var id = getFieldValue(fieldSetEntry.id, true);

                    if (id) {
                        holdingDevices.push({
                            id: id,
                            isProdUniqueId: isFieldChecked(fieldSetEntry.isProdUniqueId)
                        });
                    }
                }

                return holdingDevices.length > 0 ? holdingDevices : undefined;
            }

            function checkIssueNFAssetNFTokens(contCall) {
                var fieldSetEntries = getFieldSetEntries(document.getElementById('tblNFTokens'), [
                    {
                        fieldName: 'name',
                        className: 'itxNFTName'
                    },
                    {
                        fieldName: 'description',
                        className: 'itxNFTDescription'
                    },
                    {
                        fieldName: 'customProps',
                        className: 'tblCustomProps',
                        fieldDescriptors: [
                            {
                                fieldName: 'name',
                                className: 'itxNFTCustomPropName'
                            },
                            {
                                fieldName: 'value',
                                className: 'itxNFTCustomPropValue'
                            },
                            {
                                fieldName: 'type',
                                className: 'selNFTCustomPropType'
                            },
                            {
                                fieldName: 'sensitive',
                                className: 'cbxNFTCustomPropSensitive'
                            }
                        ]
                    },
                    {
                        fieldName: 'contents',
                        className: 'itxNFTContents'
                    },
                    {
                        fieldName: 'encoding',
                        className: 'selNFTContEncoding'
                    }
                ]);
                var nfTokens = [];

                for (var fieldSetEntry of fieldSetEntries) {
                    var nftContents;
                    var contentsEncoding;

                    if (!contCall) {
                        var tokenName = getFieldValue(fieldSetEntry.name, true);
                        var tokenDescription = checkUndefined(getFieldValue(fieldSetEntry.description, true))
                        var customProps;

                        if ((customProps = checkIssueNFAssetNFTCustomProps(fieldSetEntry.customProps)) === false) {
                            return false;
                        }

                        contentsEncoding = getFieldValue(fieldSetEntry.encoding);
                        nftContents = getFieldValue(fieldSetEntry.contents, contentsEncoding !== 'utf8');

                        if (!tokenName && (tokenDescription || customProps || nftContents)) {
                            requireField(fieldSetEntry.name, 'token name', false, true);
                            return false;
                        }

                        if (tokenName) {
                            var nfToken = {
                                metadata: {
                                    name: tokenName,
                                    description: tokenDescription
                                }
                            };

                            if (customProps) {
                                nfToken.metadata.custom = customProps;
                            }

                            if (nftContents) {
                                nfToken.contents = {
                                    data: nftContents,
                                    encoding: contentsEncoding
                                }
                            }

                            nfTokens.push(nfToken);
                        }
                        else {
                            nfTokens.push(null);
                        }
                    }
                    else {
                        contentsEncoding = getFieldValue(fieldSetEntry.encoding);
                        nftContents = getFieldValue(fieldSetEntry.contents, contentsEncoding !== 'utf8');

                        if (nftContents) {
                            nfToken = {
                                contents: {
                                    data: nftContents,
                                    encoding: contentsEncoding
                                }
                            }

                            nfTokens.push(nfToken);
                        }
                        else {
                            nfTokens.push(null);
                        }
                    }
                }

                return nfTokens.length === 0 || nfTokens.every(function (token) {return token === null}) ? undefined : nfTokens;
            }

            function checkIssueNFAssetNFTCustomProps(customPropEntries) {
                var customProps = {};

                if (customPropEntries.length > 0) {
                    var sensitiveProps = {};

                    for (var customPropEntry of customPropEntries) {
                        var propName = getFieldValue(customPropEntry.name, true);
                        var propType = getFieldValue(customPropEntry.type);
                        var propValue = getFieldValue(customPropEntry.value, propType !== 'string');

                        if (!propName && propValue) {
                            requireField(customPropEntry.name, 'property name', false, true);
                            return false;
                        }

                        if (propName && !propValue) {
                            requireField(customPropEntry.value, 'property value', false, propType !== 'string');
                            return false;
                        }

                        if (propName) {
                            switch (propType) {
                                case 'string':
                                    break;

                                case 'boolean':
                                    if ((propValue = checkBooleanField(customPropEntry.value)) === null) {
                                        return false;
                                    }
                                    break;

                                case 'number':
                                    if ((propValue = checkNumberField(customPropEntry.value, undefined, true)) === false) {
                                        return false;
                                    }
                                    break
                            }

                            if (isFieldChecked(customPropEntry.sensitive)) {
                                sensitiveProps[propName] = propValue;
                            }
                            else {
                                customProps[propName] = propValue;
                            }
                        }
                    }

                    if (Object.keys(sensitiveProps).length > 0) {
                        customProps.sensitiveProps = sensitiveProps;
                    }
                }

                return Object.keys(customProps).length > 0 ? customProps : undefined;
            }

            function getFieldSetEntries(rootElem, fieldDescriptors) {
                var entries = [];

                for (var fieldDescriptor of fieldDescriptors) {
                    var fieldElems = rootElem.getElementsByClassName(fieldDescriptor.className);

                    for (var idx = 0, limit = fieldElems.length; idx < limit; idx++) {
                        var entry = (idx in entries) ? entries[idx] : entries[idx] = {};
                        var fieldElem = fieldElems[idx];

                        entry[fieldDescriptor.fieldName] = fieldDescriptor.fieldDescriptors ? getFieldSetEntries(fieldElem, fieldDescriptor.fieldDescriptors) : fieldElem;
                    }
                }

                return entries;
            }

            function stricParseNumber(val) {
                return typeof val === 'string' && /^[+-]?(?:\d+|\d*\.\d*)$/.test(val) ? parseFloat(val) : NaN;
            }

            function strictParseInt(val) {
                return typeof val === 'string' && /^[+-]?\d+$/.test(val) ? parseInt(val) : NaN;
            }

            function strictParseBoolean(val) {
                return /^(?:0|false)$/i.test(val) ? false : (/^(?:1|true)$/i) ? true : null;
            }

            function getFieldValue(ctrlId, trim, doNotUpdateValue) {
                var ctrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);
                var value = trim ? (value = ctrl.value.trim(), doNotUpdateValue ? value: ctrl.value = value) : ctrl.value;
                return value;
            }

            function checkFieldValue(ctrlId, value) {
                return (ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId)).value === value;
            }

            function getSelectList(ctrlId) {
                return Array.prototype.map.call((ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId)).selectedOptions,function(opt){return opt.value}).join(',');
            }

            function parseNumber(val) {
                return val ? strictParseInt(val) : val;
            }

            function parseAmount(val) {
                return val ? stricParseNumber(val) : val;
            }

            function isFieldChecked(ctrlId) {
                return (ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId)).checked;
            }

            function requireField(ctrlId, fieldName, startsWithVowel, trim, getValue) {
                var fieldCtrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);
                var fieldValue = getFieldValue(fieldCtrl, trim);

                if (fieldValue && fieldValue.length > 0) {
                    return getValue ? fieldValue : true;
                }
                else {
                    alert('Please enter ' + (startsWithVowel ? 'an ' : 'a ') + fieldName);
                    fieldCtrl.focus();
                    return false;
                }
            }

            function checkDateRangeFields(idx) {
                idx = idx || '';
                if (checkDateField('idtStartDate' + idx)) {
                    return checkDateField('idtEndDate' + idx);
                }

                return false;
            }

            function checkDateField(ctrlId) {
                var dateCtrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);
                var fieldValue;

                if (dateCtrl && checkUndefined(fieldValue = getFieldValue(dateCtrl, true))) {
                    if (!moment(fieldValue).isValid()) {
                        alert('Invalid date and time. Please enter date and time in a ISO-8601 format like \'YYYY-MM-DD HH:mm:ss\'');
                        dateCtrl.focus();
                        return false;
                    }
                }

                return true;
            }

            function formatDate(value) {
                var mt = moment(value.trim());

                if (mt.isValid()) {
                    return mt.utc().format('YYYYMMDDTHHmmss[Z]');
                }

                return undefined;
            }

            function checkIntegerNumberField(ctrlId, valueDescription, getValue) {
                var fieldCtrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);

                if (fieldCtrl) {
                    var val = strictParseInt(fieldCtrl.value);

                    if (isNaN(val)) {
                        alert('Invalid ' + (valueDescription ? valueDescription : 'integer number'));
                        fieldCtrl.focus();
                        return false;
                    }

                    return getValue ? val : true;
                }

                return false;
            }

            function checkBooleanField(ctrlId, valueDescription) {
                var fieldCtrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);

                if (fieldCtrl) {
                    var val = strictParseBoolean(fieldCtrl.value);

                    if (val === null) {
                        alert('Invalid ' + (valueDescription ? valueDescription : 'boolean value'));
                        fieldCtrl.focus();
                        return null;
                    }

                    return val;
                }

                return null;
            }

            function checkNumberField(ctrlId, valueDescription, getValue) {
                var fieldCtrl = ctrlId instanceof HTMLElement ? ctrlId : document.getElementById(ctrlId);

                if (fieldCtrl) {
                    var val = stricParseNumber(fieldCtrl.value);

                    if (isNaN(val)) {
                        alert('Invalid ' + (valueDescription ? valueDescription : 'number'));
                        fieldCtrl.focus();
                        return false;
                    }

                    return getValue ? val : true;
                }

                return false;
            }

            function updateDeviceId(ctrl) {
                if (ctrl.value && ctrl.value.length > 0) {
                    var oldDeviceId = device.deviceId;

                    if (oldDeviceId !== ctrl.value) {
                        var newApiAccessSecret;

                        do {
                            newApiAccessSecret = prompt('Please enter API access secret for device');
                        }
                        while (newApiAccessSecret !== null && newApiAccessSecret.length === 0);

                        if (newApiAccessSecret !== null) {
                            device.deviceId = ctrl.value;
                            device.apiAccessSecret = newApiAccessSecret;

                            clearApiResult();
                            initApiClient();
                        }
                        else {
                            resetDeviceIdField();
                        }
                    }
                }
                else {
                    resetDeviceIdField();
                }
            }

            function resetDeviceIdField() {
                document.getElementById('itxDeviceId').value = device.deviceId;
            }

            function fillWithLastMsgId(fieldId) {
                if (lastMsgId) {
                    document.getElementById(fieldId).value = lastMsgId;
                }
            }

            function fillWithLastContToken(fieldId) {
                if (lastContToken) {
                    document.getElementById(fieldId).value = lastContToken;
                }
            }

            function fillWithLastEphemMsgId(fieldId) {
                if (lastEphemMsgId) {
                    document.getElementById(fieldId).value = lastEphemMsgId;
                }
            }

            function fillWithLastNFAssetId(fieldId) {
                if (lastNFAssetId) {
                    document.getElementById(fieldId).value = lastNFAssetId;
                }
            }

            function showLastNFTokenIds() {
                if (lastNFTokenIds) {
                    alert('Last issued non-fungible tokens:\n\n' + lastNFTokenIds.join('\n'));
                }
            }

            function fillWithLastNFAIssuanceContToken(fieldId) {
                if (lastNFAIssuanceContToken) {
                    document.getElementById(fieldId).value = lastNFAIssuanceContToken;
                }
            }

            function fillWithLastNFAIssuanceId(fieldId) {
                if (lastNFAIssuanceId) {
                    document.getElementById(fieldId).value = lastNFAIssuanceId;
                }
            }

            function fillWithLastNFTRetrievalContToken(fieldId) {
                if (lastNFTRetrievalContToken) {
                    document.getElementById(fieldId).value = lastNFTRetrievalContToken;
                }
            }

            function fillWithLastNFTRetrievalId(fieldId) {
                if (lastNFTRetrievalId) {
                    document.getElementById(fieldId).value = lastNFTRetrievalId;
                }
            }

            function fillWithLastNFTTransferId(fieldId) {
                if (lastNFTTransferId) {
                    document.getElementById(fieldId).value = lastNFTTransferId;
                }
            }

            function checkUndefined(value) {
                return value === undefined || value === null || (typeof value === 'string' && value.length === 0) ? undefined : value;
            }

            function optValue(condition, value) {
                return condition ? value : undefined;
            }

            function showArgs(label) {
                var argList = 'Source: ' + label;
                argList += '\nthis: ' + this;
                var args = Array.prototype.slice.call(arguments);
                args.shift();
                args.forEach(function (arg, idx) {
                    if (argList.length > 0) {
                        argList += '\n';
                    }
                    argList += 'Arg.#' + (idx + 1) + ': ' + JSON.stringify(arg);
                });
                alert(argList);
            }

            function appendInputText(parentId, maxLength, size, placeholder) {
                var parentElem = document.getElementById(parentId);
                parentElem.appendChild(document.createElement('br'));

                var inputElem = document.createElement('input');
                inputElem.setAttribute('type', 'text');
                inputElem.setAttribute('maxlength', maxLength);
                inputElem.setAttribute('size', size);
                if (placeholder)
                    inputElem.setAttribute('placeholder', placeholder);
                parentElem.appendChild(inputElem);
            }

            function removeLastInputText(parentId) {
                var parentElem = document.getElementById(parentId);
                var inputList = parentElem.getElementsByTagName('input');

                if (inputList.length > 1) {
                    var inputElem = inputList.item(inputList.length - 1);
                    parentElem.removeChild(inputElem.previousSibling);
                    parentElem.removeChild(inputElem);
                }
            }

            function appendDeviceIdInput(parentId, maxLength, size, placeholder) {
                var parentElem = document.getElementById(parentId);
                var divElem = document.createElement('div');
                divElem.setAttribute('style', 'margin-bottom:0.3em')

                var inputElem = document.createElement('input');
                inputElem.setAttribute('type', 'text');
                inputElem.setAttribute('maxlength', maxLength);
                inputElem.setAttribute('size', size);
                if (placeholder)
                    inputElem.setAttribute('placeholder', placeholder);
                divElem.appendChild(inputElem);

                divElem.appendChild(document.createElement('br'));

                var labelElem = document.createElement('label');
                labelElem.innerText = 'product unique ID: ';
                divElem.appendChild(labelElem);

                inputElem = document.createElement('input');
                inputElem.setAttribute('type', 'checkbox');
                divElem.appendChild(inputElem);

                parentElem.appendChild(divElem);
            }

            function removeDeviceIdInput(parentId) {
                var parentElem = document.getElementById(parentId);
                var divList = parentElem.getElementsByTagName('div');

                if (divList.length > 1) {
                    var divElem = divList.item(divList.length - 1);
                    parentElem.removeChild(divElem);
                }
            }

            function checkPermEventNameField(ctrlId) {
                var permEventNameCtrl = document.getElementById(ctrlId);

                if (permEventNameCtrl && checkUndefined(permEventNameCtrl.value) === undefined) {
                    alert('Please select a permission event');
                    permEventNameCtrl.focus();
                    return false;
                }

                return true;
            }

            function checkDeviceIdField(ctrlId, qualifier, startsWithVowel, trim) {
                var devIdCtrl = document.getElementById(ctrlId);

                if (devIdCtrl && checkUndefined(getFieldValue(ctrlId, trim)) === undefined) {
                    alert('Please enter ' + (qualifier && startsWithVowel ? 'an ' : 'a ') + (qualifier ? qualifier + ' ' : '') + 'device ID');
                    devIdCtrl.focus();
                    return false;
                }

                return true;
            }

            function fillPermEventNames(selCtrlIds) {
                listPermissionEvents(function (err, data) {
                    if (err) {
                        console.debug('Error calling List Permission Events Catenis API method', err);
                    }
                    else {
                        selCtrlIds = Array.isArray(selCtrlIds) ? selCtrlIds : [selCtrlIds];

                        selCtrlIds.forEach(function (selCtrlId) {
                            emptySelCtrl(selCtrlId);
                            var selCtrl = document.getElementById(selCtrlId);

                            selCtrl.appendChild(document.createElement('option'));

                            if (selCtrl) {
                                Object.keys(data).forEach(function (eventName) {
                                    var optElem = document.createElement('option');
                                    optElem.setAttribute('value', eventName);
                                    optElem.innerText = eventName + ' - ' + data[eventName];
                                    selCtrl.appendChild(optElem);
                                });
                            }

                            selCtrl.selectedIndex = 0;
                        });
                    }
                });
            }

            function emptySelCtrl(selCtrlId) {
                var selCtrl = document.getElementById(selCtrlId);

                if (selCtrl) {
                    var numOptions = selCtrl.options.length;

                    if (numOptions > 0) {
                        for (var idx = numOptions - 1; idx >= 0; idx--) {
                            selCtrl.remove(selCtrl[idx]);
                        }
                    }
                }
            }

            function getPermRightsToSet() {
                var rights = {};

                var sysRight = checkUndefined(getFieldValue('selSysRight'));
                if (sysRight)
                    rights.system = sysRight;

                var allowCtnNodeIndices = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            allowCtnNodeIndices.push(value);
                    }
                })(document.getElementById('divCtnNodeAllow').getElementsByTagName('input'));

                var denyCtnNodeIndices = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            denyCtnNodeIndices.push(value);
                    }
                })(document.getElementById('divCtnNodeDeny').getElementsByTagName('input'));

                var noneCtnNodeIndices = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            noneCtnNodeIndices.push(value);
                    }
                })(document.getElementById('divCtnNodeNone').getElementsByTagName('input'));

                if (allowCtnNodeIndices.length > 0 || denyCtnNodeIndices.length > 0 || noneCtnNodeIndices.length > 0) {
                    rights.catenisNode = {};

                    if (allowCtnNodeIndices.length > 0)
                        rights.catenisNode.allow = allowCtnNodeIndices.length > 1 ? allowCtnNodeIndices : allowCtnNodeIndices[0];

                    if (denyCtnNodeIndices.length > 0)
                        rights.catenisNode.deny = denyCtnNodeIndices.length > 1 ? denyCtnNodeIndices : denyCtnNodeIndices[0];

                    if (noneCtnNodeIndices.length > 0)
                        rights.catenisNode.none = noneCtnNodeIndices.length > 1 ? noneCtnNodeIndices : noneCtnNodeIndices[0];
                }

                var allowClientIds = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            allowClientIds.push(value);
                    }
                })(document.getElementById('divClientAllow').getElementsByTagName('input'));

                var denyClientIds = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            denyClientIds.push(value);
                    }
                })(document.getElementById('divClientDeny').getElementsByTagName('input'));

                var noneClientIds = [];
                (function (inputElems) {
                    for (var idx = 0; idx < inputElems.length; idx++) {
                        var value = checkUndefined(getFieldValue(inputElems[idx], true));
                        if (value)
                            noneClientIds.push(value);
                    }
                })(document.getElementById('divClientNone').getElementsByTagName('input'));

                if (allowClientIds.length > 0 || denyClientIds.length > 0 || noneClientIds.length > 0) {
                    rights.client = {};

                    if (allowClientIds.length > 0)
                        rights.client.allow = allowClientIds.length > 1 ? allowClientIds : allowClientIds[0];

                    if (denyClientIds.length > 0)
                        rights.client.deny = denyClientIds.length > 1 ? denyClientIds : denyClientIds[0];

                    if (noneClientIds.length > 0)
                        rights.client.none = noneClientIds.length > 1 ? noneClientIds : noneClientIds[0];
                }

                var allowDeviceIds = [];
                (function (divElems) {
                    for (var idx = 0; idx < divElems.length; idx++) {
                        var deviceId = {};

                        (function (inputElems) {
                            for (var idx = 0; idx < inputElems.length; idx++) {
                                if (idx === 0) {
                                    var value = checkUndefined(getFieldValue(inputElems[idx], true));
                                    if (value)
                                        deviceId.id = value;
                                }
                                else {
                                    if (inputElems[idx].checked)
                                        deviceId.prodUniqueId = true;
                                }
                            }
                        })(divElems[idx].getElementsByTagName('input'));

                        if (deviceId.id)
                            allowDeviceIds.push(deviceId);
                    }
                })(document.getElementById('divDeviceAllow').getElementsByTagName('div'));

                var denyDeviceIds = [];
                (function (divElems) {
                    for (var idx = 0; idx < divElems.length; idx++) {
                        var deviceId = {};

                        (function (inputElems) {
                            for (var idx = 0; idx < inputElems.length; idx++) {
                                if (idx === 0) {
                                    var value = checkUndefined(getFieldValue(inputElems[idx], true));
                                    if (value)
                                        deviceId.id = value;
                                }
                                else {
                                    if (inputElems[idx].checked)
                                        deviceId.prodUniqueId = true;
                                }
                            }
                        })(divElems[idx].getElementsByTagName('input'));

                        if (deviceId.id)
                            denyDeviceIds.push(deviceId);
                    }
                })(document.getElementById('divDeviceDeny').getElementsByTagName('div'));

                var noneDeviceIds = [];
                (function (divElems) {
                    for (var idx = 0; idx < divElems.length; idx++) {
                        var deviceId = {};

                        (function (inputElems) {
                            for (var idx = 0; idx < inputElems.length; idx++) {
                                if (idx === 0) {
                                    var value = checkUndefined(getFieldValue(inputElems[idx], true));
                                    if (value)
                                        deviceId.id = value;
                                }
                                else {
                                    if (inputElems[idx].checked)
                                        deviceId.prodUniqueId = true;
                                }
                            }
                        })(divElems[idx].getElementsByTagName('input'));

                        if (deviceId.id)
                            noneDeviceIds.push(deviceId);
                    }
                })(document.getElementById('divDeviceNone').getElementsByTagName('div'));

                if (allowDeviceIds.length > 0 || denyDeviceIds.length > 0 || noneDeviceIds.length > 0) {
                    rights.device = {};

                    if (allowDeviceIds.length > 0)
                        rights.device.allow = allowDeviceIds.length > 1 ? allowDeviceIds : allowDeviceIds[0];

                    if (denyDeviceIds.length > 0)
                        rights.device.deny = denyDeviceIds.length > 1 ? denyDeviceIds : denyDeviceIds[0];

                    if (noneDeviceIds.length > 0)
                        rights.device.none = noneDeviceIds.length > 1 ? noneDeviceIds : noneDeviceIds[0];
                }

                return rights;
            }

            function checkNotifyEventNameField(ctrlId) {
                var ntfyEventName = document.getElementById(ctrlId);

                if (ntfyEventName && checkUndefined(ntfyEventName.value) === undefined) {
                    alert('Please select a notification event');
                    ntfyEventName.focus();
                    return false;
                }

                return true;
            }

            function fillNotifyEventNames(selCtrlIds) {
                listNotificationEvents(function (err, data) {
                    if (err) {
                        console.debug('Error calling List Notification Events Catenis API method', err);
                    }
                    else {
                        selCtrlIds = Array.isArray(selCtrlIds) ? selCtrlIds : [selCtrlIds];

                        selCtrlIds.forEach(function (selCtrlId) {
                            emptySelCtrl(selCtrlId);
                            var selCtrl = document.getElementById(selCtrlId);

                            selCtrl.appendChild(document.createElement('option'));

                            if (selCtrl) {
                                Object.keys(data).forEach(function (eventName) {
                                    var optElem = document.createElement('option');
                                    optElem.setAttribute('value', eventName);
                                    optElem.innerText = eventName + ' - ' + data[eventName];
                                    selCtrl.appendChild(optElem);
                                });
                            }
                        });
                    }
                });
            }

            var wsNtfyChannels = {};

            function showWSActiviy(eventName, data) {
                var pElem = document.createElement('p');
                pElem.style.wordWrap = "break-word";
                pElem.innerHTML = '[' + eventName + '] - ' + data;
                document.getElementById('pNtfyChannelActivity').appendChild(pElem);
            }

            function clearWSActiviy() {
                document.getElementById('pNtfyChannelActivity').innerHTML = '';
            }

            function openWsNtfyChannel(eventName) {
                if (!(eventName in wsNtfyChannels)) {
                    var wsNtfyChannel = ctnApiClient.createWsNotifyChannel(eventName);

                    wsNtfyChannel.addListener('error', function (error) {
                        showWSActiviy(this.eventName, '<span style="color: red;">ERROR:</span><pre>' + JSON.stringify(error) + '</pre>');
                    });

                    wsNtfyChannel.addListener('close', function (code, reason) {
                        showWSActiviy(this.eventName, 'DISCONNECTED - [' + code + ']' + (reason ? ' - ' + reason : ''));
                        delete wsNtfyChannels[eventName];
                    });

                    wsNtfyChannel.addListener('open', function () {
                        // Notification channel successfully open and ready to send notifications
                        showWSActiviy(this.eventName, 'NOTIFICATION CHANNEL OPEN');
                    });

                    wsNtfyChannel.addListener('notify', function (data) {
                        if (this.eventName === 'final-msg-progress') {
                            processMessageResult(null, data, true);
                        }
                        else if (this.eventName === 'nf-asset-issuance-outcome') {
                            processNFAssetIssuanceResult(null, data, true);
                        }
                        else if (this.eventName === 'nf-token-retrieval-outcome') {
                            processNFTokenRetrievalResult(null, data, true);
                        }

                        showWSActiviy(this.eventName, '<span style="color: blue;">RECEIVED DATA:</span><pre>' + JSON.stringify(data, null, '  ') + '</pre>');
                    });

                    wsNtfyChannel.open(function (err) {
                        if (err) {
                            showWSActiviy(this.eventName, '<span style="color: red;">ERROR:</span><pre>' + error + '</pre>');
                        }
                        else {
                            // WebSocket connected
                            showWSActiviy(this.eventName, 'CONNECTED');
                        }
                    });

                    wsNtfyChannels[eventName] = wsNtfyChannel;
                }
            }

            function closeWsNtfyChannel(eventName) {
                if (eventName in wsNtfyChannels) {
                    wsNtfyChannels[eventName].close();
                }
            }

            function selectPanel(selectedPanelId) {
                var panelIds = [
                    'divMessage',
                    'divPermNotif',
                    'divAsset',
                    'divNFAsset',
                    'divAssetExport'
                ];

                panelIds.forEach(function (id) {
                    document.getElementById(id).style.display = id === selectedPanelId ? 'block' : 'none';
                });
            }

            function displayTableRows(ids, show) {
                ids.forEach(function (id) {
                    (id instanceof HTMLElement ? id : document.getElementById(id)).style.display = show ? 'table-row' : 'none';
                });
            }

            function setAssetIssueFields(reissue) {
                var reissueRowIds = [
                    'trAssetId'
                ];
                var issueRowIds = [
                    'trAssetName',
                    'trAssetDescription',
                    'trCanReissue',
                    'trDecimalPlaces'
                ];

                if (reissue) {
                    displayTableRows(reissueRowIds, true);
                    displayTableRows(issueRowIds, false);
                }
                else {
                    displayTableRows(reissueRowIds, false);
                    displayTableRows(issueRowIds, true);
                }
            }

            function setNFAssetIssueFields(reissue, contCall) {
                var allRowIds = [
                    'trNFAssetId',
                    'trNFAIssueContToken',
                    'trNFAssetName',
                    'trNFAssetDescription',
                    'trNFACanReissue',
                    'trEncryptNFTContents',
                    'trIssueNFAAsync',
                    'trNFTHoldingDevices'
                ];
                var allRowClasses = [
                    'trNFTName',
                    'trNFTDescription',
                    'trNFTCustomProps'
                ];
                var issueInitCallRowIds = [
                    'trNFAssetName',
                    'trNFAssetDescription',
                    'trNFACanReissue',
                    'trEncryptNFTContents',
                    'trIssueNFAAsync',
                    'trNFTHoldingDevices'
                ];
                var issueInitCallRowClasses = [
                    'trNFTName',
                    'trNFTDescription',
                    'trNFTCustomProps'
                ];
                var issueContCallRowIds = [
                    'trNFAIssueContToken'
                ];
                var issueContCallRowClasses = [];
                var reissueInitCallRowIds = [
                    'trNFAssetId',
                    'trEncryptNFTContents',
                    'trIssueNFAAsync',
                    'trNFTHoldingDevices'
                ];
                var reissueInitCallRowClasses = [
                    'trNFTName',
                    'trNFTDescription',
                    'trNFTCustomProps'
                ];
                var reissueContCallRowIds = [
                    'trNFAssetId',
                    'trNFAIssueContToken'
                ];
                var reissueContCallRowClasses = [];

                var activeRowIds;
                var activeRowClasses;

                if (!reissue) {
                    if (!contCall) {
                        activeRowIds = issueInitCallRowIds;
                        activeRowClasses = issueInitCallRowClasses;
                    }
                    else {
                        activeRowIds = issueContCallRowIds;
                        activeRowClasses = issueContCallRowClasses;
                    }
                }
                else {
                    if (!contCall) {
                        activeRowIds = reissueInitCallRowIds;
                        activeRowClasses = reissueInitCallRowClasses;
                    }
                    else {
                        activeRowIds = reissueContCallRowIds;
                        activeRowClasses = reissueContCallRowClasses;
                    }
                }

                if (activeRowClasses.length > 0) {
                    activeRowIds = activeRowIds.concat(activeRowClasses.reduce(function (ids, className) {
                        ids = ids.concat(Array.from(document.getElementsByClassName(className)));
                        return ids;
                    }, []));
                }

                allRowIds = allRowIds.concat(allRowClasses.reduce(function (ids, className) {
                    ids = ids.concat(Array.from(document.getElementsByClassName(className)));
                    return ids;
                }, []));

                displayTableRows(activeRowIds, true);
                displayTableRows(allRowIds.filter(function (rowId) {return !activeRowIds.includes(rowId)}), false);
            }

            function setNFTRetrieveFields(contCall, retrieveContents) {
                var allRowIds = [
                    'trNFTRetrieveContToken',
                    'trRetrieveNFTContents',
                    'trRetrieveNFTContsOnly',
                    'trRetrieveNFTEncoding',
                    'RetrieveNFTChunkSize',
                    'trRetrieveNFTAsync'
                ];
                var initCallContentsRowIds = [
                    'trRetrieveNFTContents',
                    'trRetrieveNFTContsOnly',
                    'trRetrieveNFTEncoding',
                    'RetrieveNFTChunkSize',
                    'trRetrieveNFTAsync'
                ];
                var initCallNoContentsRowIds = [
                    'trRetrieveNFTContents',
                    'trRetrieveNFTAsync'
                ];
                var contCallRowIds = [
                    'trNFTRetrieveContToken'
                ];

                var activeRowIds;

                if (!contCall) {
                    if (retrieveContents) {
                        activeRowIds = initCallContentsRowIds;
                    }
                    else {
                        activeRowIds = initCallNoContentsRowIds;
                    }
                }
                else {
                    activeRowIds = contCallRowIds;
                }

                displayTableRows(activeRowIds, true);
                displayTableRows(allRowIds.filter(function (rowId) {return !activeRowIds.includes(rowId)}), false);
            }

            function setAssetMigrationFields(reprocess) {
                var reprocessRowIds = [
                    'trMigrationId'
                ];
                var migrationRowIds = [
                    'trMgrDirection',
                    'trMgrAmount',
                    'trMgrDestAddress'
                ];

                if (reprocess) {
                    displayTableRows(reprocessRowIds, true);
                    displayTableRows(migrationRowIds, false);
                }
                else {
                    displayTableRows(reprocessRowIds, false);
                    displayTableRows(migrationRowIds, true);
                }
            }

            function addNFTHoldingDevice(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var deviceIdInputs = table.getElementsByClassName('itxNFTHoldDeviceId');
                var nextDevNum = (Number.parseInt(deviceIdInputs[deviceIdInputs.length - 1].id.match(/_(\d+)$/)[1]) + 1).toString();

                [
                    // Header
                    '<td colspan="2" style="padding-top:1em">Device #{!device_num}&nbsp;&nbsp;<a href="#" onclick="deleteNFTHoldingDevice(getAncestorByTagName(this,\'tr\'));return false">delete</a>&nbsp;&nbsp;<a href="#" onclick="deleteExtraNFTHoldingDevices(getAncestorByTagName(this,\'tr\'));return false">delete all</a></td>',
                    // Device ID
                    '<td valign="top" align="right"><label for="itxNFTHoldDeviceId_{!device_num}">ID: </label></td><td><input id="itxNFTHoldDeviceId_{!device_num}" class="itxNFTHoldDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/><br/><label for="cbxNFTProdUniqId_{!device_num}">product unique ID: </label><input id="cbxNFTProdUniqId_{!device_num}" class="cbxNFTProdUniqId" type="checkbox"/></td>'
                ]
                .forEach(function (cells) {
                    var row = table.insertRow();
                    row.innerHTML = cells.replaceAll('{!device_num}', nextDevNum);
                });
            }

            function deleteNFTHoldingDevice(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var numRows = table.rows.length;
                var firstRowIndex;

                for (let idx = 2; idx < numRows; idx++) {
                    if (table.rows[idx] === sourceRow) {
                        firstRowIndex = idx;
                        break;
                    }
                }

                if (firstRowIndex !== undefined) {
                    for (let rowIndex = Math.min(firstRowIndex + 1, numRows - 1); rowIndex >= firstRowIndex; rowIndex--) {
                        table.deleteRow(rowIndex);
                    }
                }
            }

            function deleteExtraNFTHoldingDevices(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');

                for (let rowIdx = table.rows.length - 1; rowIdx > 1; rowIdx--) {
                    table.deleteRow(rowIdx);
                }
            }

            function addNFToken(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var nftNameInputs = table.getElementsByClassName('itxNFTName');
                var nextTokenNum = (Number.parseInt(nftNameInputs[nftNameInputs.length - 1].id.match(/_(\d+)$/)[1]) + 1).toString();

                [
                    // Header
                    {
                        innerHTML: '<td colspan="2" style="padding-top:1em">Token #{!token_num}&nbsp;&nbsp;<a href="#" onclick="deleteNFToken(getAncestorByTagName(this,\'tr\'));return false">delete</a>&nbsp;&nbsp;<a href="#" onclick="deleteExtraNFTokens(getAncestorByTagName(this,\'tr\'));return false">delete all</a></td>'
                    },
                    // Token name
                    {
                        className: 'trNFTName',
                        innerHTML: '<td valign="top" align="right"><label for="itxNFTName_{!token_num}">name: </label></td><td><input id="itxNFTName_{!token_num}" class="itxNFTName" type="text" maxlength="25" size="25"/></td>'
                    },
                    // Token description
                    {
                        className: 'trNFTDescription',
                        innerHTML: '<td valign="top" align="right"><label for="itxNFTDescription_{!token_num}">description: </label></td><td><input id="itxNFTDescription_{!token_num}" class="itxNFTDescription" type="text" maxlength="80" size="80"/></td>'
                    },
                    // Custom props
                    {
                        className: 'trNFTCustomProps',
                        innerHTML: '<td valign="top" align="right"><label>Custom props: </label></td><td><table class="tblCustomProps"><tr><td colspan="2">Property #1&nbsp;&nbsp;<a href="#" onclick="addCustomProp(getAncestorByTagName(this,\'tr\'));return false">add new</a></td></tr><tr><td valign="top" align="right"><label for="itxNFTCustomPropName_{!token_num}_1">name: </label></td><td><input id="itxNFTCustomPropName_{!token_num}_1" class="itxNFTCustomPropName" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/></td></tr><tr><td valign="top" align="right"><label for="itxNFTCustomPropValue_{!token_num}_1">value: </label></td><td><input id="itxNFTCustomPropValue_{!token_num}_1" class="itxNFTCustomPropValue" style="margin-bottom:0.5em" type="text" maxlength="256" size="80"/></td></tr><tr><td valign="top" align="right"><label for="selNFTCustomPropType_{!token_num}_1">type: </label></td><td><select id="selNFTCustomPropType_{!token_num}_1" class="selNFTCustomPropType"><option value="string" selected>String</option><option value="boolean">Boolean</option><option value="number">Number</option></select></td></tr><tr><td valign="top" align="right"><label for="cbxNFTCustomPropSensitive_{!token_num}_1">sensitive: </label></td><td><input id="cbxNFTCustomPropSensitive_{!token_num}_1" class="cbxNFTCustomPropSensitive" style="margin-bottom:0.5em" type="checkbox"/></td></tr></table></td>'
                    },
                    // Contents
                    {
                        innerHTML: '<td valign="top" align="right"><label for="itxNFTContents_{!token_num}">Contents: </label></td><td><textarea id="itxNFTContents_{!token_num}" class="itxNFTContents" rows="5" cols="80"></textarea></td>'
                    },
                    // Encoding
                    {
                        innerHTML: '<td valign="top" align="right"><label for="selNFTContEncoding_{!token_num}">encoding: </label></td><td><select id="selNFTContEncoding_{!token_num}" class="selNFTContEncoding"><option value="utf8" selected>UTF-8</option><option value="base64">Base-64</option><option value="hex">Hex</option></select></td>'
                    }
                ]
                .forEach(function (cellInfo) {
                    var row = table.insertRow();
                    if (cellInfo.className) {
                        row.className = cellInfo.className;
                    }
                    row.innerHTML = cellInfo.innerHTML.replaceAll('{!token_num}', nextTokenNum);
                });
            }

            function deleteNFToken(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var numRows = table.rows.length;
                var firstRowIndex;

                for (let idx = 6; idx < numRows; idx++) {
                    if (table.rows[idx] === sourceRow) {
                        firstRowIndex = idx;
                        break;
                    }
                }

                if (firstRowIndex !== undefined) {
                    for (let rowIndex = Math.min(firstRowIndex + 5, numRows - 1); rowIndex >= firstRowIndex; rowIndex--) {
                        table.deleteRow(rowIndex);
                    }
                }
            }

            function deleteExtraNFTokens(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');

                for (let rowIdx = table.rows.length - 1; rowIdx > 5; rowIdx--) {
                    table.deleteRow(rowIdx);
                }
            }

            function addCustomProp(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var propNameInputs = table.getElementsByClassName('itxNFTCustomPropName');
                var match = propNameInputs[propNameInputs.length - 1].id.match(/_(\d+)_(\d+)$/);
                var tokenNum = (Number.parseInt(match[1]) + 1).toString();
                var nextPropNum = (Number.parseInt(match[2]) + 1).toString();

                [
                    // Header
                    '<td colspan="2" style="padding-top:1em">Property #{!prop_num}&nbsp;&nbsp;<a href="#" onclick="deleteCustomProp(getAncestorByTagName(this,\'tr\'));return false">delete</a>&nbsp;&nbsp;<a href="#" onclick="deleteExtraCustomProps(getAncestorByTagName(this,\'tr\'));return false">delete all</a></td>',
                    // Name
                    '<td valign="top" align="right"><label for="itxNFTCustomPropName_{!token_num}_{!prop_num}">name: </label></td><td><input id="itxNFTCustomPropName_{!token_num}_{!prop_num}" class="itxNFTCustomPropName" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/></td>',
                    // Value
                    '<td valign="top" align="right"><label for="itxNFTCustomPropValue_{!token_num}_{!prop_num}">value: </label></td><td><input id="itxNFTCustomPropValue_{!token_num}_{!prop_num}" class="itxNFTCustomPropValue" style="margin-bottom:0.5em" type="text" maxlength="256" size="80"/></td>',
                    // Type
                    '<td valign="top" align="right"><label for="selNFTCustomPropType_{!token_num}_{!prop_num}">type: </label></td><td><select id="selNFTCustomPropType_{!token_num}_{!prop_num}" class="selNFTCustomPropType"><option value="string" selected>String</option><option value="boolean">Boolean</option><option value="number">Number</option></select></td>',
                    // Sensitive
                    '<td valign="top" align="right"><label for="cbxNFTCustomPropSensitive_{!token_num}_{!prop_num}">sensitive: </label></td><td><input id="cbxNFTCustomPropSensitive_{!token_num}_{!prop_num}" class="cbxNFTCustomPropSensitive" style="margin-bottom:0.5em" type="checkbox"/></td>'
                ]
                .forEach(function (cells) {
                    var row = table.insertRow();
                    row.innerHTML = cells.replaceAll('{!token_num}', tokenNum).replaceAll('{!prop_num}', nextPropNum);
                });
            }

            function deleteCustomProp(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');
                var numRows = table.rows.length;
                var firstRowIndex;

                for (let idx = 5; idx < numRows; idx++) {
                    if (table.rows[idx] === sourceRow) {
                        firstRowIndex = idx;
                        break;
                    }
                }

                if (firstRowIndex !== undefined) {
                    for (let rowIndex = Math.min(firstRowIndex + 4, numRows - 1); rowIndex >= firstRowIndex; rowIndex--) {
                        table.deleteRow(rowIndex);
                    }
                }
            }

            function deleteExtraCustomProps(sourceRow) {
                var table = getAncestorByTagName(sourceRow, 'table');

                for (let rowIdx = table.rows.length - 1; rowIdx > 4; rowIdx--) {
                    table.deleteRow(rowIdx);
                }
            }

            function getAncestorByTagName(elem, tagName) {
                var ancestor = elem;

                do {
                    ancestor = ancestor.parentElement;
                }
                while (ancestor != null && ancestor.tagName !== tagName.toUpperCase());

                return ancestor != null ? ancestor : undefined;
            }
        </script>
    </head>
    <body>
        <div id="divEnvironment">
            <label for="selEnvironment">Environment: </label><select id="selEnvironment" onchange="clearApiResult(); resetDevice(); initApiClient()">
                <option value="development" selected>Development</option>
                <option value="debug">Debug</option>
                <option value="sandbox">Sandbox</option>
                <option value="prod">Production</option>
            </select>
            <br/><label for="itxDeviceId">Device ID: </label><input id="itxDeviceId" maxlength="20" size="30" onchange="updateDeviceId(this)"/>
            <script language="JavaScript">resetDeviceIdField()</script>
        </div>
        <div style="margin-top:1em">
            <a href="javascript:selectPanel('divMessage')">Messages</a>
            &nbsp;&nbsp;&nbsp;<a href="javascript:selectPanel('divAsset')">Assets</a>
            &nbsp;&nbsp;&nbsp;<a href="javascript:selectPanel('divNFAsset')">Non-Fungible Assets</a>
            &nbsp;&nbsp;&nbsp;<a href="javascript:selectPanel('divAssetExport')">Asset Export</a>
            &nbsp;&nbsp;&nbsp;<a href="javascript:selectPanel('divPermNotif')">Permission & Notification</a>
            &nbsp;&nbsp;&nbsp;<a href="javascript:selectPanel(null)">None</a>
        </div>
        <div id="divMessage" style="margin-top:1em; display:none">
            <table>
                <tr>
                    <td valign="top" align="right">
                        <label for="itxMessage">Message: </label>
                    </td>
                    <td>
                        <textarea id="itxMessage" rows="5" cols="80"></textarea>
                        <div style="margin-top:0; margin-bottom:0.5em">
                            <label for="cbxMsgChunks">Break in chunks: </label><input id="cbxMsgChunks" type="checkbox" onclick="document.getElementById('divMsgChunks').style.display=this.checked?'block':'none'" />
                            <div id="divMsgChunks" style="display:none; margin-left:2em; margin-bottom:0">
                                <label for="cbxIsFinal">Is final: </label><input id="cbxIsFinal" type="checkbox" checked />
                                <br/><label for="itxContToken">Continuation token: </label><input id="itxContToken" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastContToken('itxContToken')">Fill with last cont. token</a>
                            </div>
                        </div>
                        <label for="selMsgEncoding">encoding: </label><select id="selMsgEncoding">
                            <option value="utf8" selected>UTF-8</option>
                            <option value="base64">Base-64</option>
                            <option value="hex">Hex</option>
                        </select>
                        <br/><label for="cbxMsgEncrypt">encrypt: </label><input id="cbxMsgEncrypt" type="checkbox" checked />
                        <br/><label for="cbxOffChainMsg">off-chain: </label><input id="cbxOffChainMsg" type="checkbox" checked />
                        <br/><label for="selMsgStorage">storage: </label><select id="selMsgStorage">
                            <option value="auto" selected>Auto</option>
                            <option value="embedded">Embedded</option>
                            <option value="external">External</option>
                        </select>
                        <div style="margin-top:0.5em">
                            <label for="cbxMsgAsync">Asynchronous processing: </label><input id="cbxMsgAsync" type="checkbox" />
                        </div>
                        <button id="btnLogMessage" style="margin-top:10px" onclick="clearApiResult(); if(requireField('itxMessage','message')){logMessage(getFieldValue('itxMessage'), isFieldChecked('cbxMsgChunks'), isFieldChecked('cbxIsFinal'), checkUndefined(getFieldValue('itxContToken',true)), getFieldValue('selMsgEncoding'), isFieldChecked('cbxMsgEncrypt'), isFieldChecked('cbxOffChainMsg'), getFieldValue('selMsgStorage'), isFieldChecked('cbxMsgAsync'))}else{return false}">Log Message</button>
                        <div style="margin-top:1em">
                            <table>
                                <tr>
                                    <td valign="top">
                                        <label for="itxTrgtDeviceId">Target device ID: </label>
                                    </td>
                                    <td>
                                        <input id="itxTrgtDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                                        <br/><label for="cbxProdUniqId">product unique ID: </label><input id="cbxProdUniqId" type="checkbox"/>
                                        <br/><label for="cbxReadConfirm" style="margin-top:13px">read confirmation: </label><input id="cbxReadConfirm" type="checkbox" style="margin-top:13px" />
                                        <br/><button id="btnSendMessage" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxMessage','message') && checkDeviceIdField('itxTrgtDeviceId','target')){sendMessage(getFieldValue('itxMessage'), isFieldChecked('cbxMsgChunks'), isFieldChecked('cbxIsFinal'), checkUndefined(getFieldValue('itxContToken',true)), getFieldValue('itxTrgtDeviceId'), isFieldChecked('cbxProdUniqId'), getFieldValue('selMsgEncoding'), isFieldChecked('cbxMsgEncrypt'), isFieldChecked('cbxOffChainMsg'), getFieldValue('selMsgStorage'), isFieldChecked('cbxReadConfirm'), isFieldChecked('cbxMsgAsync'))}else{return false}">Send Message</button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:1.25em">
                        <label for="itxMsgId">Message ID: </label>
                    </td>
                    <td style="padding-top:1em">
                        <input id="itxMsgId" style="margin-bottom:0.5em" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastMsgId('itxMsgId')">Fill with last message ID</a>
                        <br/><button id="btnRetrieveMessageContainer" style="margin-top:5px;margin-bottom:10px" onclick="clearApiResult(); if(requireField('itxMsgId','message ID')){retrieveMessageContainer(getFieldValue('itxMsgId'))}else{return false}">Retrieve Message Container</button>
                        <br/><label for="selRdMsgEncoding">encoding: </label><select id="selRdMsgEncoding">
                            <option value="utf8" selected>UTF-8</option>
                            <option value="base64">Base-64</option>
                            <option value="hex">Hex</option>
                        </select>
                        <br/><label for="itxReadContToken">Continuation token: </label><input id="itxReadContToken" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastContToken('itxReadContToken')">Fill with last cont. token</a>
                        <div style="margin-top:0.5em">
                            <label for="cbxReadMsgChunks">Read in chunks: </label><input id="cbxReadMsgChunks" type="checkbox" onclick="document.getElementById('divReadMsgChunks').style.display=this.checked?'block':'none'" />
                            <div id="divReadMsgChunks" style="display:none; margin-left:2em; margin-bottom:0" onclick="if(!this.checked){document.getElementById('itxDataChunkSize').value=''}">
                                <label for="itxDataChunkSize">Chunk size: </label><input id="itxDataChunkSize" type="text" maxlength="11" size="11"/>
                            </div>
                        </div>
                        <div style="margin-top:0.5em">
                            <label for="cbxReadMsgAsync">Asynchronous processing: </label><input id="cbxReadMsgAsync" type="checkbox" />
                        </div>
                        <button id="btnReadMessage" style="margin-top:10px" onclick="clearApiResult(); if(requireField('itxMsgId','message ID') && (!isFieldChecked('cbxReadMsgChunks') || requireField('itxDataChunkSize','chunk size',false,true)) && (checkUndefined(getFieldValue('itxDataChunkSize',true))===undefined || checkIntegerNumberField('itxDataChunkSize'))){readMessage(getFieldValue('itxMsgId'), getFieldValue('selRdMsgEncoding'), checkUndefined(getFieldValue('itxReadContToken',true)), checkUndefined(getFieldValue('itxDataChunkSize',true)), isFieldChecked('cbxReadMsgAsync'))}else{return false}">Read Message</button>
                        <div style="margin-top:0.3em">
                            <label for="itxMsgToSign">Message to sign: </label><input id="itxMsgToSign" type="text" size="80"/>
                            <br/><button id="btnRetrieveMessageOrigin" style="margin-top:5px;margin-bottom:10px" onclick="clearApiResult(); if(requireField('itxMsgId','message ID')){retrieveMessageOrigin(getFieldValue('itxMsgId'), checkUndefined(getFieldValue('itxMsgToSign',true)))}else{return false}">Retrieve Message Origin</button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:1.25em">
                        <label for="itxEphemMsgId">Ephemeral message ID: </label>
                    </td>
                    <td style="padding-top:1em">
                        <input id="itxEphemMsgId" style="margin-bottom:0.5em" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastEphemMsgId('itxEphemMsgId')">Fill with last ephem. message ID</a>
                        <br/><button id="btnRetrieveMessageProgress" style="margin-top:5px;margin-bottom:10px" onclick="clearApiResult(); if(requireField('itxEphemMsgId','ephemeral message ID')){retrieveMessageProgress(getFieldValue('itxEphemMsgId'))}else{return false}">Retrieve Message Progress</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        List messages:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="selMsgAction">action: </label>
                    </td>
                    <td>
                        <select id="selMsgAction">
                            <option ></option>
                            <option value="log">Log</option>
                            <option value="send">Send</option>
                            <option value="any">Any</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="selMsgDirection">direction: </label>
                    </td>
                    <td>
                        <select id="selMsgDirection">
                            <option ></option>
                            <option value="inbound">Inbound</option>
                            <option value="outbound">Outbound</option>
                            <option value="any">Any</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxFromDeviceIds">from devices: <br>(device IDs)</label>
                    </td>
                    <td>
                        <textarea id="itxFromDeviceIds" rows="3" cols="80"></textarea>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxToDeviceIds">to devices: <br>(device IDs)</label>
                    </td>
                    <td>
                        <textarea id="itxToDeviceIds" rows="3" cols="80"></textarea>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxFromDevProdUniqueIds">from devices: <br>(prod. unique IDs)</label>
                    </td>
                    <td>
                        <textarea id="itxFromDevProdUniqueIds" rows="3" cols="80"></textarea>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxToDevProdUniqueIds">to devices: <br>(prod. unique IDs)</label>
                    </td>
                    <td>
                        <textarea id="itxToDevProdUniqueIds" rows="3" cols="80"></textarea>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="selReadState">read state: </label>
                    </td>
                    <td>
                        <select id="selReadState">
                            <option ></option>
                            <option value="unread">Unread</option>
                            <option value="read">Read</option>
                            <option value="any">Any</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="idtStartDate">start date: </label>
                    </td>
                    <td>
                        <!--input id="idtStartDate" type="datetime-local"/-->
                        <input id="idtStartDate" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="idtEndDate">end date: </label>
                    </td>
                    <td>
                        <input id="idtEndDate" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxMsgLimit">max. returned messages: </label>
                    </td>
                    <td>
                        <input id="itxMsgLimit" type="text" maxlength="3" size="3"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxMsgSkip">messages to skip: </label>
                    </td>
                    <td>
                        <input id="itxMsgSkip" type="text" maxlength="10" size="10"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnListMessages" style="margin-top:10px" onclick="clearApiResult(); if(checkDateRangeFields() && (checkUndefined(getFieldValue('itxMsgLimit',true)) === undefined || checkIntegerNumberField('itxMsgLimit')) && (checkUndefined(getFieldValue('itxMsgSkip',true)) === undefined || checkIntegerNumberField('itxMsgSkip'))){listMessages(checkUndefined(getFieldValue('selMsgAction')),checkUndefined(getFieldValue('selMsgDirection')),checkUndefined(getFieldValue('itxFromDeviceIds',true)),checkUndefined(getFieldValue('itxToDeviceIds',true)),checkUndefined(getFieldValue('itxFromDevProdUniqueIds',true)),checkUndefined(getFieldValue('itxToDevProdUniqueIds',true)),checkUndefined(getFieldValue('selReadState')),formatDate(getFieldValue('idtStartDate')),formatDate(getFieldValue('idtEndDate')),parseNumber(checkUndefined(getFieldValue('itxMsgLimit'))),parseNumber(checkUndefined(getFieldValue('itxMsgSkip'))))}else{return false}">List Messages</button>
                    </td>
                </tr>
           </table>
        </div>
        <div id="divPermNotif" style="margin-top:1em; display:none">
            <table>
                <tr>
                    <td colspan="2">
                        Retrieve Device Identification Info:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="itxOtherDeviceId">Device ID: </label>
                    </td>
                    <td>
                        <input id="itxOtherDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                        <br/><label for="cbxOtherDeviceProdUniqId">product unique ID: </label><input id="cbxOtherDeviceProdUniqId" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnRetrvDevIdentityInfo" style="margin-top:10px" onclick="clearApiResult();if(checkDeviceIdField('itxOtherDeviceId')){retrieveDeviceIdentificationInfo(getFieldValue('itxOtherDeviceId',true),isFieldChecked('cbxOtherDeviceProdUniqId'))}else{return false}">Retrieve Device Info</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Retrieve permission rights:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="selRetrvPermRightsEventName">Permission event: </label>
                    </td>
                    <td>
                        <select id="selRetrvPermRightsEventName">
                            <option ></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnRetrvPermissionRights" style="margin-top:10px" onclick="clearApiResult();if(checkPermEventNameField('selRetrvPermRightsEventName')){retrievePermissionRights(getFieldValue('selRetrvPermRightsEventName'))}else{return false}">Retrieve Rights</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Set permission rights:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:1em">
                        <label for="selSetPermRightsEventName">Permission event: </label>
                    </td>
                    <td>
                        <select id="selSetPermRightsEventName">
                            <option ></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:1em">
                        <label>Rights: </label>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:0.5em">
                        <label for="selSysRight">System: </label>
                    </td>
                    <td>
                        <select id="selSysRight">
                            <option ></option>
                            <option value="allow">Allow</option>
                            <option value="deny">Deny</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:0.5em">
                        <label>Catenis node: </label>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="divCtnNodeAllow">allow: </label>
                    </td>
                    <td>
                        <div id="divCtnNodeAllow">
                            <input type="text" maxlength="4" size="10" placeholder="None index" />
                        </div>
                        <a href="javascript:appendInputText('divCtnNodeAllow', '4', '10', 'None index')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divCtnNodeAllow')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divCtnNodeDeny">deny: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divCtnNodeDeny">
                            <input type="text" maxlength="4" size="10" placeholder="None index" />
                        </div>
                        <a href="javascript:appendInputText('divCtnNodeDeny', '4', '10', 'None index')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divCtnNodeDeny')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divCtnNodeNone">none: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divCtnNodeNone">
                            <input type="text" maxlength="4" size="10" placeholder="None index" />
                        </div>
                        <a href="javascript:appendInputText('divCtnNodeNone', '4', '10', 'None index')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divCtnNodeNone')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:0.5em">
                        <label>Client: </label>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="divClientAllow">allow: </label>
                    </td>
                    <td>
                        <div id="divClientAllow">
                            <input type="text" maxlength="20" size="30" placeholder="Client ID" />
                        </div>
                        <a href="javascript:appendInputText('divClientAllow', '20', '30', 'Client ID')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divClientAllow')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divClientDeny">deny: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divClientDeny">
                            <input type="text" maxlength="20" size="30" placeholder="Client ID" />
                        </div>
                        <a href="javascript:appendInputText('divClientDeny', '20', '30', 'Client ID')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divClientDeny')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divClientNone">none: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divClientNone">
                            <input type="text" maxlength="20" size="30" placeholder="Client ID" />
                        </div>
                        <a href="javascript:appendInputText('divClientNone', '20', '30', 'Client ID')">Add</a>&nbsp;
                        <a href="javascript:removeLastInputText('divClientNone')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-right:0.5em">
                        <label>Device: </label>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="divDeviceAllow">allow: </label>
                    </td>
                    <td>
                        <div id="divDeviceAllow">
                            <div style="margin-bottom:0.3em">
                                <input type="text" maxlength="20" size="30" placeholder="Device ID" />
                                <br/><label>product unique ID: </label><input type="checkbox"/>
                            </div>
                        </div>
                        <a href="javascript:appendDeviceIdInput('divDeviceAllow', '20', '30', 'Device ID')">Add</a>&nbsp;
                        <a href="javascript:removeDeviceIdInput('divDeviceAllow')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divDeviceDeny">deny: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divDeviceDeny">
                            <div style="margin-bottom:0.3em">
                                <input type="text" maxlength="20" size="30" placeholder="Device ID" />
                                <br/><label>product unique ID: </label><input type="checkbox"/>
                            </div>
                        </div>
                        <a href="javascript:appendDeviceIdInput('divDeviceDeny', '20', '30', 'Device ID')">Add</a>&nbsp;
                        <a href="javascript:removeDeviceIdInput('divDeviceDeny')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-top:0.5em">
                        <label for="divDeviceNone">none: </label>
                    </td>
                    <td style="padding-top:0.5em">
                        <div id="divDeviceNone">
                            <div style="margin-bottom:0.3em">
                                <input type="text" maxlength="20" size="30" placeholder="Device ID" />
                                <br/><label>product unique ID: </label><input type="checkbox"/>
                            </div>
                        </div>
                        <a href="javascript:appendDeviceIdInput('divDeviceNone', '20', '30', 'Device ID')">Add</a>&nbsp;
                        <a href="javascript:removeDeviceIdInput('divDeviceNone')">Remove</a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnSetPermissionRights" style="margin-top:10px" onclick="clearApiResult();if(checkPermEventNameField('selSetPermRightsEventName')){setPermissionRights(getFieldValue('selSetPermRightsEventName'), getPermRightsToSet())}else{return false}">Set Rights</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Check effective permission right:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="selCheckEffectivePermRight">Permission event: </label>
                    </td>
                    <td>
                        <select id="selCheckEffectivePermRight">
                            <option ></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="itxObjDeviceId">Device ID: </label>
                    </td>
                    <td>
                        <input id="itxObjDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                        <br/><label for="cbxObjDeviceProdUniqId">product unique ID: </label><input id="cbxObjDeviceProdUniqId" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnCheckEffectivePermRight" style="margin-top:10px" onclick="clearApiResult();if(checkPermEventNameField('selCheckEffectivePermRight') && checkDeviceIdField('itxObjDeviceId')){checkEffectivePermissionRight(getFieldValue('selCheckEffectivePermRight'),getFieldValue('itxObjDeviceId',true),isFieldChecked('cbxObjDeviceProdUniqId'))}else{return false}">Check Effective Right</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Open WebSocket notification channel:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="selOpenNotifyEventName">Notification event: </label>
                    </td>
                    <td>
                        <select id="selOpenNotifyEventName">
                            <option ></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnOpenWsNotifyChannel" style="margin-top:10px" onclick="if(checkNotifyEventNameField('selOpenNotifyEventName')){openWsNtfyChannel(getFieldValue('selOpenNotifyEventName'))}else{return false}">Open Notification Channel</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Close WebSocket notification channel:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right">
                        <label for="selCloseNotifyEventName">Notification event: </label>
                    </td>
                    <td>
                        <select id="selCloseNotifyEventName">
                            <option ></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnCloseWsNotifyChannel" style="margin-top:10px" onclick="if(checkNotifyEventNameField('selCloseNotifyEventName')){closeWsNtfyChannel(getFieldValue('selCloseNotifyEventName'))}else{return false}">Close Notification Channel</button>
                    </td>
                </tr>
            </table>
        </div>
        <div id="divAsset" style="margin-top:1em; display:none">
            <table>
                <tr>
                    <td colspan="2">
                        Issue asset:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxReissue">Reissue an existing asset: </label>
                    </td>
                    <td>
                        <input id="cbxReissue" type="checkbox" onclick="setAssetIssueFields(this.checked)"/>
                    </td>
                </tr>
                <tr id="trAssetId" style="display:none">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr id="trAssetName">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetName">asset name: </label>
                    </td>
                    <td>
                        <input id="itxAssetName" type="text" maxlength="25" size="25"/>
                    </td>
                </tr>
                <tr id="trAssetDescription">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetDescription">asset description: </label>
                    </td>
                    <td>
                        <input id="itxAssetDescription" type="text" maxlength="80" size="80"/>
                    </td>
                </tr>
                <tr id="trCanReissue">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxCanReissue">can reissue: </label>
                    </td>
                    <td>
                        <input id="cbxCanReissue" type="checkbox"/>
                    </td>
                </tr>
                <tr id="trDecimalPlaces">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxDecimalPlaces">decimal places: </label>
                    </td>
                    <td>
                        <input id="itxDecimalPlaces" type="text" maxlength="1" size="1"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxIssueAmount">amount: </label>
                    </td>
                    <td>
                        <input id="itxIssueAmount" type="text" maxlength="17" size="17"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" >
                        <label for="itxHoldDeviceId">Holding device ID: </label>
                    </td>
                    <td>
                        <input id="itxHoldDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                        <br/><label for="cbxProdUniqId2">product unique ID: </label><input id="cbxProdUniqId2" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnIssueAsset" style="margin-top:8px" onclick="clearApiResult(); if(isFieldChecked('cbxReissue')){if(requireField('itxAssetId','asset ID',true,true) && requireField('itxIssueAmount','amount',true,true) && checkNumberField('itxIssueAmount', 'amount')){reissueAsset(getFieldValue('itxAssetId',true),parseAmount(getFieldValue('itxIssueAmount')),checkUndefined(getFieldValue('itxHoldDeviceId',true)),isFieldChecked('cbxProdUniqId2'))}else{return false}}else{if(requireField('itxAssetName','asset name',true,true) && requireField('itxDecimalPlaces','value for decimal places',false,true) && checkIntegerNumberField('itxDecimalPlaces') && requireField('itxIssueAmount','amount',true,true) && checkNumberField('itxIssueAmount', 'amount')){issueAsset(getFieldValue('itxAssetName',true),checkUndefined(getFieldValue('itxAssetDescription',true)),isFieldChecked('cbxCanReissue'),parseNumber(getFieldValue('itxDecimalPlaces')),parseAmount(getFieldValue('itxIssueAmount')),checkUndefined(getFieldValue('itxHoldDeviceId',true)),isFieldChecked('cbxProdUniqId2'))}else{return false}}">Issue Asset</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Transfer asset:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId2">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId2" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxTransferAmount">amount: </label>
                    </td>
                    <td>
                        <input id="itxTransferAmount" type="text" maxlength="17" size="17"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" >
                        <label for="itxRecvDeviceId">Receiving device ID: </label>
                    </td>
                    <td>
                        <input id="itxRecvDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                        <br/><label for="cbxProdUniqId3">product unique ID: </label><input id="cbxProdUniqId3" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnTransferAsset" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId2','asset ID',true,true) && requireField('itxTransferAmount','amount',true,true) && checkNumberField('itxTransferAmount', 'amount') && checkDeviceIdField('itxRecvDeviceId','receiving',false,true)){transferAsset(getFieldValue('itxAssetId2',true),parseAmount(getFieldValue('itxTransferAmount')),getFieldValue('itxRecvDeviceId',true),isFieldChecked('cbxProdUniqId3'))}else{return false}">Transfer Asset</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Retrieve asset info:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId3">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId3" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnAssetInfo" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId3','asset ID',true,true)){retrieveAssetInfo(getFieldValue('itxAssetId3',true))}else{return false}">Retrieve Info</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Get asset balance:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId4">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId4" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnAssetBalance" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId4','asset ID',true,true)){getAssetBalance(getFieldValue('itxAssetId4',true))}else{return false}">Get Balance</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        List owned assets:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxLimit">maximum returned entries: </label>
                    </td>
                    <td>
                        <input id="itxLimit" type="text" maxlength="3" size="3"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxSkip">entries to skip: </label>
                    </td>
                    <td>
                        <input id="itxSkip" type="text" maxlength="10" size="10"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnOwnedAssets" style="margin-top:8px" onclick="clearApiResult(); if((checkUndefined(getFieldValue('itxLimit',true)) === undefined || checkIntegerNumberField('itxLimit')) && (checkUndefined(getFieldValue('itxSkip',true)) === undefined || checkIntegerNumberField('itxSkip'))){listOwnedAssets(parseNumber(checkUndefined(getFieldValue('itxLimit',true))),parseNumber(checkUndefined(getFieldValue('itxSkip',true))))}else{return false}">List assets</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        List issued assets:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxLimit2">maximum returned entries: </label>
                    </td>
                    <td>
                        <input id="itxLimit2" type="text" maxlength="3" size="3"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxSkip2">entries to skip: </label>
                    </td>
                    <td>
                        <input id="itxSkip2" type="text" maxlength="10" size="10"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnIssuedAssets" style="margin-top:8px" onclick="clearApiResult(); if((checkUndefined(getFieldValue('itxLimit2',true)) === undefined || checkIntegerNumberField('itxLimit2')) && (checkUndefined(getFieldValue('itxSkip2',true)) === undefined || checkIntegerNumberField('itxSkip2'))){listIssuedAssets(parseNumber(checkUndefined(getFieldValue('itxLimit2',true))),parseNumber(checkUndefined(getFieldValue('itxSkip2',true))))}else{return false}">List assets</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Retrieve asset issuance history:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId5">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId5" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="idtStartDate2">start date: </label>
                    </td>
                    <td>
                        <input id="idtStartDate2" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="idtEndDate2">end date: </label>
                    </td>
                    <td>
                        <input id="idtEndDate2" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxLimit4">max. returned issuance events: </label>
                    </td>
                    <td>
                        <input id="itxLimit4" type="text" maxlength="3" size="3"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxSkip4">issuance events to skip: </label>
                    </td>
                    <td>
                        <input id="itxSkip4" type="text" maxlength="10" size="10"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnAssetIssuance" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId5','asset ID',true,true) && checkDateRangeFields(2)){retrieveAssetIssuanceHistory(getFieldValue('itxAssetId5',true),formatDate(getFieldValue('idtStartDate2')),formatDate(getFieldValue('idtEndDate2')),parseNumber(checkUndefined(getFieldValue('itxLimit4',true))),parseNumber(checkUndefined(getFieldValue('itxSkip4',true))))}else{return false}">Retrieve issuance history</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        List asset holders:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxAssetId6">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxAssetId6" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxLimit3">maximum returned entries: </label>
                    </td>
                    <td>
                        <input id="itxLimit3" type="text" maxlength="3" size="3"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxSkip3">entries to skip: </label>
                    </td>
                    <td>
                        <input id="itxSkip3" type="text" maxlength="10" size="10"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnAssetHolders" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId6','asset ID',true,true) && (checkUndefined(getFieldValue('itxLimit3',true)) === undefined || checkIntegerNumberField('itxLimit3')) && (checkUndefined(getFieldValue('itxSkip3',true)) === undefined || checkIntegerNumberField('itxSkip3'))){listAssetHolders(getFieldValue('itxAssetId6',true),parseNumber(checkUndefined(getFieldValue('itxLimit3',true))),parseNumber(checkUndefined(getFieldValue('itxSkip3',true))))}else{return false}">List holders</button>
                    </td>
                </tr>
            </table>
        </div>
        <div id="divNFAsset" style="margin-top:1em; display:none">
            <table>
                <tr>
                    <td colspan="2">
                        Issue non-fungible asset:
                    </td>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxNFAReissue">Reissue an existing asset: </label>
                    </td>
                    <td>
                        <input id="cbxNFAReissue" type="checkbox" onclick="setNFAssetIssueFields(this.checked, document.getElementById('cbxNFAIssueContCall').checked)"/>
                    </td>
                </tr>
                <tr id="trNFAssetId" style="display:none">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFAssetId">asset ID: </label>
                    </td>
                    <td>
                        <input id="itxNFAssetId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFAssetId('itxNFAssetId')">Fill with last asset ID</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxNFAIssueContCall">Continuation call: </label>
                    </td>
                    <td>
                        <input id="cbxNFAIssueContCall" type="checkbox" onclick="setNFAssetIssueFields(document.getElementById('cbxNFAReissue').checked, this.checked)"/>
                    </td>
                </tr>
                <tr id="trNFAIssueContToken" style="display:none">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFAIssueContToken">continuation token: </label>
                    </td>
                    <td>
                        <input id="itxNFAIssueContToken" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFAIssuanceContToken('itxNFAIssueContToken')">Fill with last cont. token</a>
                    </td>
                </tr>
                <tr id="trNFAssetName">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFAssetName">asset name: </label>
                    </td>
                    <td>
                        <input id="itxNFAssetName" type="text" maxlength="25" size="25"/>
                    </td>
                </tr>
                <tr id="trNFAssetDescription">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFAssetDescription">asset description: </label>
                    </td>
                    <td>
                        <input id="itxNFAssetDescription" type="text" maxlength="80" size="80"/>
                    </td>
                </tr>
                <tr id="trNFACanReissue">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxNFACanReissue">can reissue: </label>
                    </td>
                    <td>
                        <input id="cbxNFACanReissue" type="checkbox"/>
                    </td>
                </tr>
                <tr id="trEncryptNFTContents">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxEncryptNFTContents">encrypt NFT contents: </label>
                    </td>
                    <td>
                        <input id="cbxEncryptNFTContents" type="checkbox" checked/>
                    </td>
                </tr>
                <tr id="trIssueNFAAsync">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxIssueNFAAsync">asynchronous processing: </label>
                    </td>
                    <td>
                        <input id="cbxIssueNFAAsync" type="checkbox"/>
                    </td>
                </tr>
                <tr id="trNFTHoldingDevices">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label>Holding devices: </label>
                    </td>
                    <td>
                        <table id="tblNFTHoldingDevices">
                            <tr>
                                <td colspan="2">Device #1&nbsp;&nbsp;<a href="#" onclick="addNFTHoldingDevice(getAncestorByTagName(this,'tr'));return false">add new</a></td>
                            </tr>
                            <tr>
                                <td valign="top" align="right">
                                    <label for="itxNFTHoldDeviceId_1">ID: </label>
                                </td>
                                <td>
                                    <input id="itxNFTHoldDeviceId_1" class="itxNFTHoldDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                                    <br/><label for="cbxNFTProdUniqId_1">product unique ID: </label><input id="cbxNFTProdUniqId_1" class="cbxNFTProdUniqId" type="checkbox"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxIssueNFAFinal">is final: </label>
                    </td>
                    <td>
                        <input id="cbxIssueNFAFinal" type="checkbox" checked/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label>Non-Fungible Tokens: </label>
                    </td>
                    <td>
                        <table id="tblNFTokens">
                            <tr>
                                <td colspan="2">Token #1&nbsp;&nbsp;<a href="#" onclick="addNFToken(getAncestorByTagName(this,'tr'));setNFAssetIssueFields(document.getElementById('cbxNFAReissue').checked, document.getElementById('cbxNFAIssueContCall').checked);return false">add new</a></td>
                            </tr>
                            <tr class="trNFTName">
                                <td valign="top" align="right">
                                    <label for="itxNFTName_1">name: </label>
                                </td>
                                <td>
                                    <input id="itxNFTName_1" class="itxNFTName" type="text" maxlength="25" size="25"/>
                                </td>
                            </tr>
                            <tr class="trNFTDescription">
                                <td valign="top" align="right">
                                    <label for="itxNFTDescription_1">description: </label>
                                </td>
                                <td>
                                    <input id="itxNFTDescription_1" class="itxNFTDescription" type="text" maxlength="80" size="80"/>
                                </td>
                            </tr>
                            <tr class="trNFTCustomProps">
                                <td valign="top" align="right">
                                    <label>Custom props: </label>
                                </td>
                                <td>
                                    <table class="tblCustomProps">
                                        <tr>
                                            <td colspan="2">Property #1&nbsp;&nbsp;<a href="#" onclick="addCustomProp(getAncestorByTagName(this,'tr'));return false">add new</a></td>
                                        </tr>
                                        <tr>
                                            <td valign="top" align="right">
                                                <label for="itxNFTCustomPropName_1_1">name: </label>
                                            </td>
                                            <td>
                                                <input id="itxNFTCustomPropName_1_1" class="itxNFTCustomPropName" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td valign="top" align="right">
                                                <label for="itxNFTCustomPropValue_1_1">value: </label>
                                            </td>
                                            <td>
                                                <input id="itxNFTCustomPropValue_1_1" class="itxNFTCustomPropValue" style="margin-bottom:0.5em" type="text" maxlength="256" size="80"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td valign="top" align="right">
                                                <label for="selNFTCustomPropType_1_1">type: </label>
                                            </td>
                                            <td>
                                                <select id="selNFTCustomPropType_1_1" class="selNFTCustomPropType">
                                                    <option value="string" selected>String</option>
                                                    <option value="boolean">Boolean</option>
                                                    <option value="number">Number</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td valign="top" align="right">
                                                <label for="cbxNFTCustomPropSensitive_1_1">sensitive: </label>
                                            </td>
                                            <td>
                                                <input id="cbxNFTCustomPropSensitive_1_1" class="cbxNFTCustomPropSensitive" style="margin-bottom:0.5em" type="checkbox"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top" align="right">
                                    <label for="itxNFTContents_1">Contents: </label>
                                </td>
                                <td>
                                    <textarea id="itxNFTContents_1" class="itxNFTContents" rows="5" cols="80"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top" align="right">
                                    <label for="selNFTContEncoding_1">encoding: </label>
                                </td>
                                <td>
                                    <select id="selNFTContEncoding_1" class="selNFTContEncoding">
                                        <option value="utf8" selected>UTF-8</option>
                                        <option value="base64">Base-64</option>
                                        <option value="hex">Hex</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnIssueNFAsset" style="margin-top:8px" onclick="return submitIssueNFAsset()">Issue Non-Fungible Asset</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Non-Fungible Asset Issuance Progress:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFAssetIssuanceId">asset issuance ID: </label>
                    </td>
                    <td>
                        <input id="itxNFAssetIssuanceId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFAIssuanceId('itxNFAssetIssuanceId')">Fill with last asset issuance ID</a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnRetrieveNFAIssuanceProgress" style="margin-top:8px" onclick="return submitRetrieveNFAIssuanceProgress()">Retrieve Issuance Progress</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Retrieve Non-Fungible Token:
                    </td>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxRetrieveNFTTokenId">non-fungible token ID: </label>
                    </td>
                    <td>
                        <input id="itxRetrieveNFTTokenId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:showLastNFTokenIds()">Show last non-fungible token IDs</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxNFTRetrieveContCall">Continuation call: </label>
                    </td>
                    <td>
                        <input id="cbxNFTRetrieveContCall" type="checkbox" onclick="setNFTRetrieveFields(this.checked, document.getElementById('cbxRetrieveNFTContents').checked)"/>
                    </td>
                </tr>
                <tr id="trNFTRetrieveContToken" style="display:none">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFTRetrieveContToken">continuation token: </label>
                    </td>
                    <td>
                        <input id="itxNFTRetrieveContToken" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFTRetrievalContToken('itxNFTRetrieveContToken')">Fill with last cont. token</a>
                    </td>
                </tr>
                <tr id="trRetrieveNFTContents">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxRetrieveNFTContents">Retrieve contents: </label>
                    </td>
                    <td>
                        <input id="cbxRetrieveNFTContents" type="checkbox" onclick="setNFTRetrieveFields(document.getElementById('cbxNFTRetrieveContCall').checked, this.checked)" checked/>
                    </td>
                </tr>
                <tr id="trRetrieveNFTContsOnly">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxRetrieveNFTContsOnly">contents only: </label>
                    </td>
                    <td>
                        <input id="cbxRetrieveNFTContsOnly" type="checkbox"/>
                    </td>
                </tr>
                <tr id="trRetrieveNFTEncoding">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="selRetrieveNFTEncoding">encoding: </label>
                    </td>
                    <td>
                        <select id="selRetrieveNFTEncoding" class="selNFTContEncoding">
                            <option value="utf8" selected>UTF-8</option>
                            <option value="base64">Base-64</option>
                            <option value="hex">Hex</option>
                        </select>
                    </td>
                </tr>
                <tr id="RetrieveNFTChunkSize">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxRetrieveNFTChunkSize">data chunk size: </label>
                    </td>
                    <td>
                        <input id="itxRetrieveNFTChunkSize" type="text" maxlength="20" size="20"/>
                    </td>
                </tr>
                <tr id="trRetrieveNFTAsync">
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxRetrieveNFTAsync">asynchronous processing: </label>
                    </td>
                    <td>
                        <input id="cbxRetrieveNFTAsync" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnRetrieveNFToken" style="margin-top:8px" onclick="return submitRetrieveNFToken()">Retrieve Non-Fungible Token</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Non-Fungible Token Retrieval Progress:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxRetrieveNFTProgressTokenId">non-fungible token ID: </label>
                    </td>
                    <td>
                        <input id="itxRetrieveNFTProgressTokenId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:showLastNFTokenIds()">Show last non-fungible token IDs</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFTRetrievalId">token retrieval ID: </label>
                    </td>
                    <td>
                        <input id="itxNFTRetrievalId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFTRetrievalId('itxNFTRetrievalId')">Fill with last token retrieval ID</a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnRetrieveNFTRetrievalProgress" style="margin-top:8px" onclick="return submitRetrieveNFTRetrievalProgress()">Retrieve Retrieval Progress</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Transfer Non-Fungible Token:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxTransferNFTTokenId">non-fungible token ID: </label>
                    </td>
                    <td>
                        <input id="itxTransferNFTTokenId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:showLastNFTokenIds()">Show last non-fungible token IDs</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" >
                        <label for="itxTransferNFTRecvDeviceId">Receiving device ID: </label>
                    </td>
                    <td>
                        <input id="itxTransferNFTRecvDeviceId" style="margin-bottom:0.5em" type="text" maxlength="40" size="40"/>
                        <br/><label for="cbxTransferNFTProdUniqId">product unique ID: </label><input id="cbxTransferNFTProdUniqId" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="cbxTransferNFTAsync">asynchronous processing: </label>
                    </td>
                    <td>
                        <input id="cbxTransferNFTAsync" type="checkbox"/>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnTransferNFToken" style="margin-top:8px" onclick="return submitTransferNFToken()">Transfer Non-Fungible Token</button>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="padding-top:1.25em">
                        Non-Fungible Token Transfer Progress:
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxTransferNFTProgressTokenId">non-fungible token ID: </label>
                    </td>
                    <td>
                        <input id="itxTransferNFTProgressTokenId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:showLastNFTokenIds()">Show last non-fungible token IDs</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" align="right" style="padding-left:1em">
                        <label for="itxNFTTransferId">token transfer ID: </label>
                    </td>
                    <td>
                        <input id="itxNFTTransferId" type="text" maxlength="20" size="20"/>&nbsp;<a href="javascript:fillWithLastNFTTransferId('itxNFTTransferId')">Fill with last token transfer ID</a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <button id="btnTransferNFTRetrievalProgress" style="margin-top:8px" onclick="return submitRetrieveNFTTransferProgress()">Retrieve Transfer Progress</button>
                    </td>
                </tr>
            </table>
        </div>
        <div id="divAssetExport" style="margin-top:1em; display:none">
    <table>
        <tr>
            <td colspan="2">
                Export asset:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetId7">asset ID: </label>
            </td>
            <td>
                <input id="itxAssetId7" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selForeignBc">foreign blockchain: </label>
            </td>
            <td>
                <select id="selForeignBc">
                    <option value="ethereum" selected>Ethereum</option>
                    <option value="binance">Binance Smart Chain</option>
                    <option value="polygon">Polygon PoS Chain</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxTokenName">token name: </label>
            </td>
            <td>
                <input id="itxTokenName" type="text" maxlength="80" size="80"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxTokenSymbol">token symbol: </label>
            </td>
            <td>
                <input id="itxTokenSymbol" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selConsumptionPrf">Consumption profile: </label>
            </td>
            <td>
                <select id="selConsumptionPrf">
                    <option value="" selected></option>
                    <option value="fastest">Fastest</option>
                    <option value="fast">Fast</option>
                    <option value="average">Average</option>
                    <option value="slow">Slow</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="cbxEstimateOnly">estimate only: </label>
            </td>
            <td>
                <input id="cbxEstimateOnly" type="checkbox"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnExportAsset" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId7','asset ID',true,true) && requireField('itxTokenName','token name',false,true) && requireField('itxTokenSymbol','token symbol',false,true)){exportAsset(getFieldValue('itxAssetId7',true),getFieldValue('selForeignBc'),getFieldValue('itxTokenName'),getFieldValue('itxTokenSymbol'),checkUndefined(getFieldValue('selConsumptionPrf')),isFieldChecked('cbxEstimateOnly'))}else{return false}">Export Asset</button>
            </td>
        </tr>

        <tr>
            <td colspan="2" style="padding-top:1.25em">
                Migrate asset:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetId8">asset ID: </label>
            </td>
            <td>
                <input id="itxAssetId8" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selForeignBc2">foreign blockchain: </label>
            </td>
            <td>
                <select id="selForeignBc2">
                    <option value="ethereum" selected>Ethereum</option>
                    <option value="binance">Binance Smart Chain</option>
                    <option value="polygon">Polygon PoS Chain</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="cbxReprMigration">Reprocess a (failed) migration: </label>
            </td>
            <td>
                <input id="cbxReprMigration" type="checkbox" onclick="setAssetMigrationFields(this.checked)"/>
            </td>
        </tr>
        <tr id="trMigrationId" style="display:none">
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxMigrationId">migration ID: </label>
            </td>
            <td>
                <input id="itxMigrationId" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr id="trMgrDirection">
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selMgrDirection">direction: </label>
            </td>
            <td>
                <select id="selMgrDirection">
                    <option value="outward" selected>Outward</option>
                    <option value="inward">Inward</option>
                </select>
            </td>
        </tr>
        <tr id="trMgrAmount">
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxMgrAmount">amount: </label>
            </td>
            <td>
                <input id="itxMgrAmount" type="text" maxlength="17" size="17"/>
            </td>
        </tr>
        <tr id="trMgrDestAddress">
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxMgrDestAddress">destination address: </label>
            </td>
            <td>
                <input id="itxMgrDestAddress" type="text" maxlength="42" size="42"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selConsumptionPrf2">Consumption profile: </label>
            </td>
            <td>
                <select id="selConsumptionPrf2">
                    <option value="" selected></option>
                    <option value="fastest">Fastest</option>
                    <option value="fast">Fast</option>
                    <option value="average">Average</option>
                    <option value="slow">Slow</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="cbxEstimateOnly2">estimate only: </label>
            </td>
            <td>
                <input id="cbxEstimateOnly2" type="checkbox"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnMigrateAsset" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId8','asset ID',true,true) && ((isFieldChecked('cbxReprMigration') && (requireField('itxMigrationId','migration ID',false,true))) || (!isFieldChecked('cbxReprMigration') && (requireField('itxMgrAmount','amount',true,true) && checkNumberField('itxMgrAmount', 'amount')) && (!checkFieldValue('selMgrDirection','outward') || requireField('itxMgrDestAddress','destination address',false,true))))){migrateAsset(getFieldValue('itxAssetId8',true),getFieldValue('selForeignBc2'),optValue(isFieldChecked('cbxReprMigration'),getFieldValue('itxMigrationId')),getFieldValue('selMgrDirection'),parseAmount(getFieldValue('itxMgrAmount')),optValue(checkFieldValue('selMgrDirection','outward'),checkUndefined(getFieldValue('itxMgrDestAddress'))),checkUndefined(getFieldValue('selConsumptionPrf2')),isFieldChecked('cbxEstimateOnly2'))}else{return false}">Migrate Asset</button>
            </td>
        </tr>

        <tr>
            <td colspan="2" style="padding-top:1.25em">
                Asset export outcome:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetId9">asset ID: </label>
            </td>
            <td>
                <input id="itxAssetId9" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selForeignBc3">foreign blockchain: </label>
            </td>
            <td>
                <select id="selForeignBc3">
                    <option value="ethereum" selected>Ethereum</option>
                    <option value="binance">Binance Smart Chain</option>
                    <option value="polygon">Polygon PoS Chain</option>
                </select>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnAssetExportOutcome" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxAssetId9','asset ID',true,true)){assetExportOutcome(getFieldValue('itxAssetId9',true),getFieldValue('selForeignBc3'))}else{return false}">Get Outcome</button>
            </td>
        </tr>

        <tr>
            <td colspan="2" style="padding-top:1.25em">
                Asset migration outcome:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxMigrationId2">migration ID: </label>
            </td>
            <td>
                <input id="itxMigrationId2" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnAssetMigrationOutcome" style="margin-top:8px" onclick="clearApiResult(); if(requireField('itxMigrationId2','migration ID',false,true)){assetMigrationOutcome(getFieldValue('itxMigrationId2',true))}else{return false}">Get Outcome</button>
            </td>
        </tr>

        <tr>
            <td colspan="2" style="padding-top:1.25em">
                List exported assets:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetId10">asset ID: </label>
            </td>
            <td>
                <input id="itxAssetId10" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selForeignBc4">foreign blockchain: </label>
            </td>
            <td>
                <select id="selForeignBc4">
                    <option value="" selected></option>
                    <option value="ethereum">Ethereum</option>
                    <option value="binance">Binance Smart Chain</option>
                    <option value="polygon">Polygon PoS Chain</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxTokenSymbol2">token symbol: </label>
            </td>
            <td>
                <input id="itxTokenSymbol2" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selAssetExpStatus">status: </label>
            </td>
            <td>
                <select id="selAssetExpStatus" multiple size="3">
                    <option value="pending">Pending</option>
                    <option value="success">Success</option>
                    <option value="error">Error</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="cbxNotAssetExpStatus">negate status: </label>
            </td>
            <td>
                <input id="cbxNotAssetExpStatus" type="checkbox"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="idtStartDate3">start date: </label>
            </td>
            <td>
                <input id="idtStartDate3" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="idtEndDate3">end date: </label>
            </td>
            <td>
                <input id="idtEndDate3" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetExpLimit">max. returned asset exports: </label>
            </td>
            <td>
                <input id="itxAssetExpLimit" type="text" maxlength="3" size="3"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetExpSkip">asset exports to skip: </label>
            </td>
            <td>
                <input id="itxAssetExpSkip" type="text" maxlength="10" size="10"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnListExpAsset" style="margin-top:10px" onclick="clearApiResult(); if(checkDateRangeFields(3) && (checkUndefined(getFieldValue('itxAssetExpLimit',true)) === undefined || checkIntegerNumberField('itxAssetExpLimit')) && (checkUndefined(getFieldValue('itxAssetExpSkip',true)) === undefined || checkIntegerNumberField('itxAssetExpSkip'))){listExportedAssets(checkUndefined(getFieldValue('itxAssetId10',true)),checkUndefined(getFieldValue('selForeignBc4',true)),checkUndefined(getFieldValue('itxTokenSymbol2',true)),checkUndefined(getSelectList('selAssetExpStatus')),isFieldChecked('cbxNotAssetExpStatus'),formatDate(getFieldValue('idtStartDate3')),formatDate(getFieldValue('idtEndDate3')),parseNumber(checkUndefined(getFieldValue('itxAssetExpLimit'))),parseNumber(checkUndefined(getFieldValue('itxAssetExpSkip'))))}else{return false}">List Asset Exports</button>
            </td>
        </tr>

        <tr>
            <td colspan="2" style="padding-top:1.25em">
                List asset migrations:
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetId11">asset ID: </label>
            </td>
            <td>
                <input id="itxAssetId11" type="text" maxlength="20" size="20"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selForeignBc5">foreign blockchain: </label>
            </td>
            <td>
                <select id="selForeignBc5">
                    <option value="" selected></option>
                    <option value="ethereum">Ethereum</option>
                    <option value="binance">Binance Smart Chain</option>
                    <option value="polygon">Polygon PoS Chain</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selMgrDirection2">direction: </label>
            </td>
            <td>
                <select id="selMgrDirection2">
                    <option value="" selected></option>
                    <option value="outward">Outward</option>
                    <option value="inward">Inward</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="selAssetExpStatus2">status: </label>
            </td>
            <td>
                <select id="selAssetExpStatus2" multiple size="4">
                    <option value="pending">Pending</option>
                    <option value="interrupted">Interrupted</option>
                    <option value="success">Success</option>
                    <option value="error">Error</option>
                </select>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="cbxNotAssetExpStatus2">negate status: </label>
            </td>
            <td>
                <input id="cbxNotAssetExpStatus2" type="checkbox"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="idtStartDate4">start date: </label>
            </td>
            <td>
                <input id="idtStartDate4" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="idtEndDate4">end date: </label>
            </td>
            <td>
                <input id="idtEndDate4" placeholder="YYYY-MM-dd HH:mm:ss" type="text" maxlength="25"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetMgrLimit">max. returned asset migrations: </label>
            </td>
            <td>
                <input id="itxAssetMgrLimit" type="text" maxlength="3" size="3"/>
            </td>
        </tr>
        <tr>
            <td valign="top" align="right" style="padding-left:1em">
                <label for="itxAssetMgrSkip">asset migrations to skip: </label>
            </td>
            <td>
                <input id="itxAssetMgrSkip" type="text" maxlength="10" size="10"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button id="btnListAssetMgr" style="margin-top:10px" onclick="clearApiResult(); if(checkDateRangeFields(4) && (checkUndefined(getFieldValue('itxAssetMgrLimit',true)) === undefined || checkIntegerNumberField('itxAssetMgrLimit')) && (checkUndefined(getFieldValue('itxAssetMgrSkip',true)) === undefined || checkIntegerNumberField('itxAssetMgrSkip'))){listAssetMigrations(checkUndefined(getFieldValue('itxAssetId11',true)),checkUndefined(getFieldValue('selForeignBc5',true)),checkUndefined(getFieldValue('selMgrDirection2',true)),checkUndefined(getSelectList('selAssetExpStatus2')),isFieldChecked('cbxNotAssetExpStatus2'),formatDate(getFieldValue('idtStartDate4')),formatDate(getFieldValue('idtEndDate4')),parseNumber(checkUndefined(getFieldValue('itxAssetMgrLimit'))),parseNumber(checkUndefined(getFieldValue('itxAssetMgrSkip'))))}else{return false}">List Asset Migrations</button>
            </td>
        </tr>
    </table>
</div>
        <table width="100%" style="margin-top:1em">
            <tr>
                <td valign="top" width="50%">
                    <div id="divApiResult">
                        <label>Catenis API Result:</label><br/>
                        <p id="pApiResult"></p>
                    </div>
                </td>
                <td valign="top" width="50%">
                    <div id="divNtfyChannelActivity">
                        <label>Notification channel activity:</label>&nbsp;&nbsp;<a href="javascript:clearWSActiviy()">Clear activity log</a><br/>
                        <p id="pNtfyChannelActivity"></p>
                    </div>
                </td>
            </tr>
        </table>
        <script language="JavaScript">
            clearApiResult();
            clearWSActiviy();
            initApiClient();
        </script>
    </body>
</html>